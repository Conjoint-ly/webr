"use strict";var Fo=Object.create;var cs=Object.defineProperty;var Bo=Object.getOwnPropertyDescriptor;var zo=Object.getOwnPropertyNames;var jo=Object.getPrototypeOf,qo=Object.prototype.hasOwnProperty;var V=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var Ho=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of zo(r))!qo.call(e,a)&&a!==t&&cs(e,a,{get:()=>r[a],enumerable:!(n=Bo(r,a))||n.enumerable});return e};var Xe=(e,r,t)=>(t=e!=null?Fo(jo(e)):{},Ho(r||!e||!e.__esModule?cs(t,"default",{value:e,enumerable:!0}):t,e));var Xn=(e,r,t)=>{if(!r.has(e))throw TypeError("Cannot "+t)};var g=(e,r,t)=>(Xn(e,r,"read from private field"),t?t.call(e):r.get(e)),x=(e,r,t)=>{if(r.has(e))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(e):r.set(e,t)},P=(e,r,t,n)=>(Xn(e,r,"write to private field"),n?n.call(e,t):r.set(e,t),t),us=(e,r,t,n)=>({set _(a){P(e,r,a,t)},get _(){return g(e,r,n)}}),K=(e,r,t)=>(Xn(e,r,"access private method"),t);var lr=V(de=>{"use strict";Object.defineProperty(de,"__esModule",{value:!0});de.getUint64=de.getInt64=de.setInt64=de.setUint64=de.UINT32_MAX=void 0;de.UINT32_MAX=4294967295;function Xo(e,r,t){let n=t/4294967296,a=t;e.setUint32(r,n),e.setUint32(r+4,a)}de.setUint64=Xo;function Go(e,r,t){let n=Math.floor(t/4294967296),a=t;e.setUint32(r,n),e.setUint32(r+4,a)}de.setInt64=Go;function Ko(e,r){let t=e.getInt32(r),n=e.getUint32(r+4);return t*4294967296+n}de.getInt64=Ko;function Yo(e,r){let t=e.getUint32(r),n=e.getUint32(r+4);return t*4294967296+n}de.getUint64=Yo});var sn=V(G=>{"use strict";var oa,la,ca;Object.defineProperty(G,"__esModule",{value:!0});G.utf8DecodeTD=G.TEXT_DECODER_THRESHOLD=G.utf8DecodeJs=G.utf8EncodeTE=G.TEXT_ENCODER_THRESHOLD=G.utf8EncodeJs=G.utf8Count=void 0;var Rs=lr(),an=(typeof process>"u"||((oa=process==null?void 0:process.env)===null||oa===void 0?void 0:oa.TEXT_ENCODING)!=="never")&&typeof TextEncoder<"u"&&typeof TextDecoder<"u";function Qo(e){let r=e.length,t=0,n=0;for(;n<r;){let a=e.charCodeAt(n++);if(a&4294967168)if(!(a&4294965248))t+=2;else{if(a>=55296&&a<=56319&&n<r){let s=e.charCodeAt(n);(s&64512)===56320&&(++n,a=((a&1023)<<10)+(s&1023)+65536)}a&4294901760?t+=4:t+=3}else{t++;continue}}return t}G.utf8Count=Qo;function el(e,r,t){let n=e.length,a=t,s=0;for(;s<n;){let i=e.charCodeAt(s++);if(i&4294967168)if(!(i&4294965248))r[a++]=i>>6&31|192;else{if(i>=55296&&i<=56319&&s<n){let o=e.charCodeAt(s);(o&64512)===56320&&(++s,i=((i&1023)<<10)+(o&1023)+65536)}i&4294901760?(r[a++]=i>>18&7|240,r[a++]=i>>12&63|128,r[a++]=i>>6&63|128):(r[a++]=i>>12&15|224,r[a++]=i>>6&63|128)}else{r[a++]=i;continue}r[a++]=i&63|128}}G.utf8EncodeJs=el;var cr=an?new TextEncoder:void 0;G.TEXT_ENCODER_THRESHOLD=an?typeof process<"u"&&((la=process==null?void 0:process.env)===null||la===void 0?void 0:la.TEXT_ENCODING)!=="force"?200:0:Rs.UINT32_MAX;function tl(e,r,t){r.set(cr.encode(e),t)}function rl(e,r,t){cr.encodeInto(e,r.subarray(t))}G.utf8EncodeTE=cr!=null&&cr.encodeInto?rl:tl;var nl=4096;function al(e,r,t){let n=r,a=n+t,s=[],i="";for(;n<a;){let o=e[n++];if(!(o&128))s.push(o);else if((o&224)===192){let d=e[n++]&63;s.push((o&31)<<6|d)}else if((o&240)===224){let d=e[n++]&63,l=e[n++]&63;s.push((o&31)<<12|d<<6|l)}else if((o&248)===240){let d=e[n++]&63,l=e[n++]&63,u=e[n++]&63,w=(o&7)<<18|d<<12|l<<6|u;w>65535&&(w-=65536,s.push(w>>>10&1023|55296),w=56320|w&1023),s.push(w)}else s.push(o);s.length>=nl&&(i+=String.fromCharCode(...s),s.length=0)}return s.length>0&&(i+=String.fromCharCode(...s)),i}G.utf8DecodeJs=al;var sl=an?new TextDecoder:null;G.TEXT_DECODER_THRESHOLD=an?typeof process<"u"&&((ca=process==null?void 0:process.env)===null||ca===void 0?void 0:ca.TEXT_DECODER)!=="force"?200:0:Rs.UINT32_MAX;function il(e,r,t){let n=e.subarray(r,r+t);return sl.decode(n)}G.utf8DecodeTD=il});var da=V(on=>{"use strict";Object.defineProperty(on,"__esModule",{value:!0});on.ExtData=void 0;var ua=class{constructor(r,t){this.type=r,this.data=t}};on.ExtData=ua});var cn=V(ln=>{"use strict";Object.defineProperty(ln,"__esModule",{value:!0});ln.DecodeError=void 0;var Dt=class extends Error{constructor(r){super(r);let t=Object.create(Dt.prototype);Object.setPrototypeOf(this,t),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:Dt.name})}};ln.DecodeError=Dt});var fa=V(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.timestampExtension=J.decodeTimestampExtension=J.decodeTimestampToTimeSpec=J.encodeTimestampExtension=J.encodeDateToTimeSpec=J.encodeTimeSpecToTimestamp=J.EXT_TIMESTAMP=void 0;var ol=cn(),xs=lr();J.EXT_TIMESTAMP=-1;var ll=4294967296-1,cl=17179869184-1;function Es({sec:e,nsec:r}){if(e>=0&&r>=0&&e<=cl)if(r===0&&e<=ll){let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e),t}else{let t=e/4294967296,n=e&4294967295,a=new Uint8Array(8),s=new DataView(a.buffer);return s.setUint32(0,r<<2|t&3),s.setUint32(4,n),a}else{let t=new Uint8Array(12),n=new DataView(t.buffer);return n.setUint32(0,r),(0,xs.setInt64)(n,4,e),t}}J.encodeTimeSpecToTimestamp=Es;function vs(e){let r=e.getTime(),t=Math.floor(r/1e3),n=(r-t*1e3)*1e6,a=Math.floor(n/1e9);return{sec:t+a,nsec:n-a*1e9}}J.encodeDateToTimeSpec=vs;function Ts(e){if(e instanceof Date){let r=vs(e);return Es(r)}else return null}J.encodeTimestampExtension=Ts;function Ss(e){let r=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:r.getUint32(0),nsec:0};case 8:{let t=r.getUint32(0),n=r.getUint32(4),a=(t&3)*4294967296+n,s=t>>>2;return{sec:a,nsec:s}}case 12:{let t=(0,xs.getInt64)(r,4),n=r.getUint32(0);return{sec:t,nsec:n}}default:throw new ol.DecodeError(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}J.decodeTimestampToTimeSpec=Ss;function ks(e){let r=Ss(e);return new Date(r.sec*1e3+r.nsec/1e6)}J.decodeTimestampExtension=ks;J.timestampExtension={type:J.EXT_TIMESTAMP,encode:Ts,decode:ks}});var fn=V(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.ExtensionCodec=void 0;var un=da(),ul=fa(),ur=class{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(ul.timestampExtension)}register({type:r,encode:t,decode:n}){if(r>=0)this.encoders[r]=t,this.decoders[r]=n;else{let a=1+r;this.builtInEncoders[a]=t,this.builtInDecoders[a]=n}}tryToEncode(r,t){for(let n=0;n<this.builtInEncoders.length;n++){let a=this.builtInEncoders[n];if(a!=null){let s=a(r,t);if(s!=null){let i=-1-n;return new un.ExtData(i,s)}}}for(let n=0;n<this.encoders.length;n++){let a=this.encoders[n];if(a!=null){let s=a(r,t);if(s!=null){let i=n;return new un.ExtData(i,s)}}}return r instanceof un.ExtData?r:null}decode(r,t,n){let a=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return a?a(r,t,n):new un.ExtData(t,r)}};dn.ExtensionCodec=ur;ur.defaultCodec=new ur});var ha=V(Mt=>{"use strict";Object.defineProperty(Mt,"__esModule",{value:!0});Mt.createDataView=Mt.ensureUint8Array=void 0;function As(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}Mt.ensureUint8Array=As;function dl(e){if(e instanceof ArrayBuffer)return new DataView(e);let r=As(e);return new DataView(r.buffer,r.byteOffset,r.byteLength)}Mt.createDataView=dl});var _a=V(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.Encoder=me.DEFAULT_INITIAL_BUFFER_SIZE=me.DEFAULT_MAX_DEPTH=void 0;var dr=sn(),fl=fn(),Ds=lr(),hl=ha();me.DEFAULT_MAX_DEPTH=100;me.DEFAULT_INITIAL_BUFFER_SIZE=2048;var pa=class{constructor(r=fl.ExtensionCodec.defaultCodec,t=void 0,n=me.DEFAULT_MAX_DEPTH,a=me.DEFAULT_INITIAL_BUFFER_SIZE,s=!1,i=!1,o=!1,d=!1){this.extensionCodec=r,this.context=t,this.maxDepth=n,this.initialBufferSize=a,this.sortKeys=s,this.forceFloat32=i,this.ignoreUndefined=o,this.forceIntegerToFloat=d,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}reinitializeState(){this.pos=0}encodeSharedRef(r){return this.reinitializeState(),this.doEncode(r,1),this.bytes.subarray(0,this.pos)}encode(r){return this.reinitializeState(),this.doEncode(r,1),this.bytes.slice(0,this.pos)}doEncode(r,t){if(t>this.maxDepth)throw new Error(`Too deep objects in depth ${t}`);r==null?this.encodeNil():typeof r=="boolean"?this.encodeBoolean(r):typeof r=="number"?this.encodeNumber(r):typeof r=="string"?this.encodeString(r):this.encodeObject(r,t)}ensureBufferSizeToWrite(r){let t=this.pos+r;this.view.byteLength<t&&this.resizeBuffer(t*2)}resizeBuffer(r){let t=new ArrayBuffer(r),n=new Uint8Array(t),a=new DataView(t);n.set(this.bytes),this.view=a,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(r){r===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(r){Number.isSafeInteger(r)&&!this.forceIntegerToFloat?r>=0?r<128?this.writeU8(r):r<256?(this.writeU8(204),this.writeU8(r)):r<65536?(this.writeU8(205),this.writeU16(r)):r<4294967296?(this.writeU8(206),this.writeU32(r)):(this.writeU8(207),this.writeU64(r)):r>=-32?this.writeU8(224|r+32):r>=-128?(this.writeU8(208),this.writeI8(r)):r>=-32768?(this.writeU8(209),this.writeI16(r)):r>=-2147483648?(this.writeU8(210),this.writeI32(r)):(this.writeU8(211),this.writeI64(r)):this.forceFloat32?(this.writeU8(202),this.writeF32(r)):(this.writeU8(203),this.writeF64(r))}writeStringHeader(r){if(r<32)this.writeU8(160+r);else if(r<256)this.writeU8(217),this.writeU8(r);else if(r<65536)this.writeU8(218),this.writeU16(r);else if(r<4294967296)this.writeU8(219),this.writeU32(r);else throw new Error(`Too long string: ${r} bytes in UTF-8`)}encodeString(r){if(r.length>dr.TEXT_ENCODER_THRESHOLD){let a=(0,dr.utf8Count)(r);this.ensureBufferSizeToWrite(5+a),this.writeStringHeader(a),(0,dr.utf8EncodeTE)(r,this.bytes,this.pos),this.pos+=a}else{let a=(0,dr.utf8Count)(r);this.ensureBufferSizeToWrite(5+a),this.writeStringHeader(a),(0,dr.utf8EncodeJs)(r,this.bytes,this.pos),this.pos+=a}}encodeObject(r,t){let n=this.extensionCodec.tryToEncode(r,this.context);if(n!=null)this.encodeExtension(n);else if(Array.isArray(r))this.encodeArray(r,t);else if(ArrayBuffer.isView(r))this.encodeBinary(r);else if(typeof r=="object")this.encodeMap(r,t);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(r)}`)}encodeBinary(r){let t=r.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else if(t<4294967296)this.writeU8(198),this.writeU32(t);else throw new Error(`Too large binary: ${t}`);let n=(0,hl.ensureUint8Array)(r);this.writeU8a(n)}encodeArray(r,t){let n=r.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<4294967296)this.writeU8(221),this.writeU32(n);else throw new Error(`Too large array: ${n}`);for(let a of r)this.doEncode(a,t+1)}countWithoutUndefined(r,t){let n=0;for(let a of t)r[a]!==void 0&&n++;return n}encodeMap(r,t){let n=Object.keys(r);this.sortKeys&&n.sort();let a=this.ignoreUndefined?this.countWithoutUndefined(r,n):n.length;if(a<16)this.writeU8(128+a);else if(a<65536)this.writeU8(222),this.writeU16(a);else if(a<4294967296)this.writeU8(223),this.writeU32(a);else throw new Error(`Too large map object: ${a}`);for(let s of n){let i=r[s];this.ignoreUndefined&&i===void 0||(this.encodeString(s),this.doEncode(i,t+1))}}encodeExtension(r){let t=r.data.length;if(t===1)this.writeU8(212);else if(t===2)this.writeU8(213);else if(t===4)this.writeU8(214);else if(t===8)this.writeU8(215);else if(t===16)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else if(t<4294967296)this.writeU8(201),this.writeU32(t);else throw new Error(`Too large extension object: ${t}`);this.writeI8(r.type),this.writeU8a(r.data)}writeU8(r){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,r),this.pos++}writeU8a(r){let t=r.length;this.ensureBufferSizeToWrite(t),this.bytes.set(r,this.pos),this.pos+=t}writeI8(r){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,r),this.pos++}writeU16(r){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,r),this.pos+=2}writeI16(r){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,r),this.pos+=2}writeU32(r){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,r),this.pos+=4}writeI32(r){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,r),this.pos+=4}writeF32(r){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,r),this.pos+=4}writeF64(r){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,r),this.pos+=8}writeU64(r){this.ensureBufferSizeToWrite(8),(0,Ds.setUint64)(this.view,this.pos,r),this.pos+=8}writeI64(r){this.ensureBufferSizeToWrite(8),(0,Ds.setInt64)(this.view,this.pos,r),this.pos+=8}};me.Encoder=pa});var Ms=V(hn=>{"use strict";Object.defineProperty(hn,"__esModule",{value:!0});hn.encode=void 0;var pl=_a(),_l={};function gl(e,r=_l){return new pl.Encoder(r.extensionCodec,r.context,r.maxDepth,r.initialBufferSize,r.sortKeys,r.forceFloat32,r.ignoreUndefined,r.forceIntegerToFloat).encodeSharedRef(e)}hn.encode=gl});var Os=V(pn=>{"use strict";Object.defineProperty(pn,"__esModule",{value:!0});pn.prettyByte=void 0;function ml(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}pn.prettyByte=ml});var Ps=V(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});_n.CachedKeyDecoder=void 0;var yl=sn(),bl=16,wl=16,ga=class{constructor(r=bl,t=wl){this.maxKeyLength=r,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(r){return r>0&&r<=this.maxKeyLength}find(r,t,n){let a=this.caches[n-1];e:for(let s of a){let i=s.bytes;for(let o=0;o<n;o++)if(i[o]!==r[t+o])continue e;return s.str}return null}store(r,t){let n=this.caches[r.length-1],a={bytes:r,str:t};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=a:n.push(a)}decode(r,t,n){let a=this.find(r,t,n);if(a!=null)return this.hit++,a;this.miss++;let s=(0,yl.utf8DecodeJs)(r,t,n),i=Uint8Array.prototype.slice.call(r,t,t+n);return this.store(i,s),s}};_n.CachedKeyDecoder=ga});var gn=V(Me=>{"use strict";Object.defineProperty(Me,"__esModule",{value:!0});Me.Decoder=Me.DataViewIndexOutOfBoundsError=void 0;var ma=Os(),Rl=fn(),ot=lr(),ya=sn(),ba=ha(),xl=Ps(),De=cn(),El=e=>{let r=typeof e;return r==="string"||r==="number"},fr=-1,Ra=new DataView(new ArrayBuffer(0)),vl=new Uint8Array(Ra.buffer);Me.DataViewIndexOutOfBoundsError=(()=>{try{Ra.getInt8(0)}catch(e){return e.constructor}throw new Error("never reached")})();var Is=new Me.DataViewIndexOutOfBoundsError("Insufficient data"),Tl=new xl.CachedKeyDecoder,wa=class{constructor(r=Rl.ExtensionCodec.defaultCodec,t=void 0,n=ot.UINT32_MAX,a=ot.UINT32_MAX,s=ot.UINT32_MAX,i=ot.UINT32_MAX,o=ot.UINT32_MAX,d=Tl){this.extensionCodec=r,this.context=t,this.maxStrLength=n,this.maxBinLength=a,this.maxArrayLength=s,this.maxMapLength=i,this.maxExtLength=o,this.keyDecoder=d,this.totalPos=0,this.pos=0,this.view=Ra,this.bytes=vl,this.headByte=fr,this.stack=[]}reinitializeState(){this.totalPos=0,this.headByte=fr,this.stack.length=0}setBuffer(r){this.bytes=(0,ba.ensureUint8Array)(r),this.view=(0,ba.createDataView)(this.bytes),this.pos=0}appendBuffer(r){if(this.headByte===fr&&!this.hasRemaining(1))this.setBuffer(r);else{let t=this.bytes.subarray(this.pos),n=(0,ba.ensureUint8Array)(r),a=new Uint8Array(t.length+n.length);a.set(t),a.set(n,t.length),this.setBuffer(a)}}hasRemaining(r){return this.view.byteLength-this.pos>=r}createExtraByteError(r){let{view:t,pos:n}=this;return new RangeError(`Extra ${t.byteLength-n} of ${t.byteLength} byte(s) found at buffer[${r}]`)}decode(r){this.reinitializeState(),this.setBuffer(r);let t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t}*decodeMulti(r){for(this.reinitializeState(),this.setBuffer(r);this.hasRemaining(1);)yield this.doDecodeSync()}async decodeAsync(r){let t=!1,n;for await(let o of r){if(t)throw this.createExtraByteError(this.totalPos);this.appendBuffer(o);try{n=this.doDecodeSync(),t=!0}catch(d){if(!(d instanceof Me.DataViewIndexOutOfBoundsError))throw d}this.totalPos+=this.pos}if(t){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return n}let{headByte:a,pos:s,totalPos:i}=this;throw new RangeError(`Insufficient data in parsing ${(0,ma.prettyByte)(a)} at ${i} (${s} in the current buffer)`)}decodeArrayStream(r){return this.decodeMultiAsync(r,!0)}decodeStream(r){return this.decodeMultiAsync(r,!1)}async*decodeMultiAsync(r,t){let n=t,a=-1;for await(let s of r){if(t&&a===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s),n&&(a=this.readArraySize(),n=!1,this.complete());try{for(;yield this.doDecodeSync(),--a!==0;);}catch(i){if(!(i instanceof Me.DataViewIndexOutOfBoundsError))throw i}this.totalPos+=this.pos}}doDecodeSync(){e:for(;;){let r=this.readHeadByte(),t;if(r>=224)t=r-256;else if(r<192)if(r<128)t=r;else if(r<144){let a=r-128;if(a!==0){this.pushMapState(a),this.complete();continue e}else t={}}else if(r<160){let a=r-144;if(a!==0){this.pushArrayState(a),this.complete();continue e}else t=[]}else{let a=r-160;t=this.decodeUtf8String(a,0)}else if(r===192)t=null;else if(r===194)t=!1;else if(r===195)t=!0;else if(r===202)t=this.readF32();else if(r===203)t=this.readF64();else if(r===204)t=this.readU8();else if(r===205)t=this.readU16();else if(r===206)t=this.readU32();else if(r===207)t=this.readU64();else if(r===208)t=this.readI8();else if(r===209)t=this.readI16();else if(r===210)t=this.readI32();else if(r===211)t=this.readI64();else if(r===217){let a=this.lookU8();t=this.decodeUtf8String(a,1)}else if(r===218){let a=this.lookU16();t=this.decodeUtf8String(a,2)}else if(r===219){let a=this.lookU32();t=this.decodeUtf8String(a,4)}else if(r===220){let a=this.readU16();if(a!==0){this.pushArrayState(a),this.complete();continue e}else t=[]}else if(r===221){let a=this.readU32();if(a!==0){this.pushArrayState(a),this.complete();continue e}else t=[]}else if(r===222){let a=this.readU16();if(a!==0){this.pushMapState(a),this.complete();continue e}else t={}}else if(r===223){let a=this.readU32();if(a!==0){this.pushMapState(a),this.complete();continue e}else t={}}else if(r===196){let a=this.lookU8();t=this.decodeBinary(a,1)}else if(r===197){let a=this.lookU16();t=this.decodeBinary(a,2)}else if(r===198){let a=this.lookU32();t=this.decodeBinary(a,4)}else if(r===212)t=this.decodeExtension(1,0);else if(r===213)t=this.decodeExtension(2,0);else if(r===214)t=this.decodeExtension(4,0);else if(r===215)t=this.decodeExtension(8,0);else if(r===216)t=this.decodeExtension(16,0);else if(r===199){let a=this.lookU8();t=this.decodeExtension(a,1)}else if(r===200){let a=this.lookU16();t=this.decodeExtension(a,2)}else if(r===201){let a=this.lookU32();t=this.decodeExtension(a,4)}else throw new De.DecodeError(`Unrecognized type byte: ${(0,ma.prettyByte)(r)}`);this.complete();let n=this.stack;for(;n.length>0;){let a=n[n.length-1];if(a.type===0)if(a.array[a.position]=t,a.position++,a.position===a.size)n.pop(),t=a.array;else continue e;else if(a.type===1){if(!El(t))throw new De.DecodeError("The type of key must be string or number but "+typeof t);if(t==="__proto__")throw new De.DecodeError("The key __proto__ is not allowed");a.key=t,a.type=2;continue e}else if(a.map[a.key]=t,a.readCount++,a.readCount===a.size)n.pop(),t=a.map;else{a.key=null,a.type=1;continue e}}return t}}readHeadByte(){return this.headByte===fr&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=fr}readArraySize(){let r=this.readHeadByte();switch(r){case 220:return this.readU16();case 221:return this.readU32();default:{if(r<160)return r-144;throw new De.DecodeError(`Unrecognized array type byte: ${(0,ma.prettyByte)(r)}`)}}}pushMapState(r){if(r>this.maxMapLength)throw new De.DecodeError(`Max length exceeded: map length (${r}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.push({type:1,size:r,key:null,readCount:0,map:{}})}pushArrayState(r){if(r>this.maxArrayLength)throw new De.DecodeError(`Max length exceeded: array length (${r}) > maxArrayLength (${this.maxArrayLength})`);this.stack.push({type:0,size:r,array:new Array(r),position:0})}decodeUtf8String(r,t){var n;if(r>this.maxStrLength)throw new De.DecodeError(`Max length exceeded: UTF-8 byte length (${r}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+t+r)throw Is;let a=this.pos+t,s;return this.stateIsMapKey()&&(!((n=this.keyDecoder)===null||n===void 0)&&n.canBeCached(r))?s=this.keyDecoder.decode(this.bytes,a,r):r>ya.TEXT_DECODER_THRESHOLD?s=(0,ya.utf8DecodeTD)(this.bytes,a,r):s=(0,ya.utf8DecodeJs)(this.bytes,a,r),this.pos+=t+r,s}stateIsMapKey(){return this.stack.length>0?this.stack[this.stack.length-1].type===1:!1}decodeBinary(r,t){if(r>this.maxBinLength)throw new De.DecodeError(`Max length exceeded: bin length (${r}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(r+t))throw Is;let n=this.pos+t,a=this.bytes.subarray(n,n+r);return this.pos+=t+r,a}decodeExtension(r,t){if(r>this.maxExtLength)throw new De.DecodeError(`Max length exceeded: ext length (${r}) > maxExtLength (${this.maxExtLength})`);let n=this.view.getInt8(this.pos+t),a=this.decodeBinary(r,t+1);return this.extensionCodec.decode(a,n,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){let r=this.view.getUint8(this.pos);return this.pos++,r}readI8(){let r=this.view.getInt8(this.pos);return this.pos++,r}readU16(){let r=this.view.getUint16(this.pos);return this.pos+=2,r}readI16(){let r=this.view.getInt16(this.pos);return this.pos+=2,r}readU32(){let r=this.view.getUint32(this.pos);return this.pos+=4,r}readI32(){let r=this.view.getInt32(this.pos);return this.pos+=4,r}readU64(){let r=(0,ot.getUint64)(this.view,this.pos);return this.pos+=8,r}readI64(){let r=(0,ot.getInt64)(this.view,this.pos);return this.pos+=8,r}readF32(){let r=this.view.getFloat32(this.pos);return this.pos+=4,r}readF64(){let r=this.view.getFloat64(this.pos);return this.pos+=8,r}};Me.Decoder=wa});var xa=V(ye=>{"use strict";Object.defineProperty(ye,"__esModule",{value:!0});ye.decodeMulti=ye.decode=ye.defaultDecodeOptions=void 0;var Us=gn();ye.defaultDecodeOptions={};function Sl(e,r=ye.defaultDecodeOptions){return new Us.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decode(e)}ye.decode=Sl;function kl(e,r=ye.defaultDecodeOptions){return new Us.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decodeMulti(e)}ye.decodeMulti=kl});var Cs=V(Fe=>{"use strict";Object.defineProperty(Fe,"__esModule",{value:!0});Fe.ensureAsyncIterable=Fe.asyncIterableFromStream=Fe.isAsyncIterable=void 0;function Ns(e){return e[Symbol.asyncIterator]!=null}Fe.isAsyncIterable=Ns;function Al(e){if(e==null)throw new Error("Assertion Failure: value must not be null nor undefined")}async function*Ws(e){let r=e.getReader();try{for(;;){let{done:t,value:n}=await r.read();if(t)return;Al(n),yield n}}finally{r.releaseLock()}}Fe.asyncIterableFromStream=Ws;function Dl(e){return Ns(e)?e:Ws(e)}Fe.ensureAsyncIterable=Dl});var Fs=V(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.decodeStream=be.decodeMultiStream=be.decodeArrayStream=be.decodeAsync=void 0;var Ea=gn(),va=Cs(),mn=xa();async function Ml(e,r=mn.defaultDecodeOptions){let t=(0,va.ensureAsyncIterable)(e);return new Ea.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decodeAsync(t)}be.decodeAsync=Ml;function Ol(e,r=mn.defaultDecodeOptions){let t=(0,va.ensureAsyncIterable)(e);return new Ea.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decodeArrayStream(t)}be.decodeArrayStream=Ol;function Ls(e,r=mn.defaultDecodeOptions){let t=(0,va.ensureAsyncIterable)(e);return new Ea.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decodeStream(t)}be.decodeMultiStream=Ls;function Pl(e,r=mn.defaultDecodeOptions){return Ls(e,r)}be.decodeStream=Pl});var bn=V(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.decodeTimestampExtension=D.encodeTimestampExtension=D.decodeTimestampToTimeSpec=D.encodeTimeSpecToTimestamp=D.encodeDateToTimeSpec=D.EXT_TIMESTAMP=D.ExtData=D.ExtensionCodec=D.Encoder=D.DataViewIndexOutOfBoundsError=D.DecodeError=D.Decoder=D.decodeStream=D.decodeMultiStream=D.decodeArrayStream=D.decodeAsync=D.decodeMulti=D.decode=D.encode=void 0;var Il=Ms();Object.defineProperty(D,"encode",{enumerable:!0,get:function(){return Il.encode}});var Bs=xa();Object.defineProperty(D,"decode",{enumerable:!0,get:function(){return Bs.decode}});Object.defineProperty(D,"decodeMulti",{enumerable:!0,get:function(){return Bs.decodeMulti}});var yn=Fs();Object.defineProperty(D,"decodeAsync",{enumerable:!0,get:function(){return yn.decodeAsync}});Object.defineProperty(D,"decodeArrayStream",{enumerable:!0,get:function(){return yn.decodeArrayStream}});Object.defineProperty(D,"decodeMultiStream",{enumerable:!0,get:function(){return yn.decodeMultiStream}});Object.defineProperty(D,"decodeStream",{enumerable:!0,get:function(){return yn.decodeStream}});var zs=gn();Object.defineProperty(D,"Decoder",{enumerable:!0,get:function(){return zs.Decoder}});Object.defineProperty(D,"DataViewIndexOutOfBoundsError",{enumerable:!0,get:function(){return zs.DataViewIndexOutOfBoundsError}});var Ul=cn();Object.defineProperty(D,"DecodeError",{enumerable:!0,get:function(){return Ul.DecodeError}});var Nl=_a();Object.defineProperty(D,"Encoder",{enumerable:!0,get:function(){return Nl.Encoder}});var Wl=fn();Object.defineProperty(D,"ExtensionCodec",{enumerable:!0,get:function(){return Wl.ExtensionCodec}});var Cl=da();Object.defineProperty(D,"ExtData",{enumerable:!0,get:function(){return Cl.ExtData}});var Ot=fa();Object.defineProperty(D,"EXT_TIMESTAMP",{enumerable:!0,get:function(){return Ot.EXT_TIMESTAMP}});Object.defineProperty(D,"encodeDateToTimeSpec",{enumerable:!0,get:function(){return Ot.encodeDateToTimeSpec}});Object.defineProperty(D,"encodeTimeSpecToTimestamp",{enumerable:!0,get:function(){return Ot.encodeTimeSpecToTimestamp}});Object.defineProperty(D,"decodeTimestampToTimeSpec",{enumerable:!0,get:function(){return Ot.decodeTimestampToTimeSpec}});Object.defineProperty(D,"encodeTimestampExtension",{enumerable:!0,get:function(){return Ot.encodeTimestampExtension}});Object.defineProperty(D,"decodeTimestampExtension",{enumerable:!0,get:function(){return Ot.decodeTimestampExtension}})});var Oo=V((yp,Mo)=>{var er=require("fs"),Do=require("url"),Td=require("child_process").spawn;Mo.exports=os;os.XMLHttpRequest=os;function os(e){"use strict";e=e||{};var r=this,t=require("http"),n=require("https"),a,s,i={},o=!1,d={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},l=Object.assign({},d),u=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],w=["TRACE","TRACK","CONNECT"],_=!1,f=!1,m=!1,S={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),this.status=null,this.statusText=null;var E=function(p){return o||p&&u.indexOf(p.toLowerCase())===-1},R=function(p){return p&&w.indexOf(p)===-1};this.open=function(p,h,A,C,b){if(this.abort(),f=!1,m=!1,!R(p))throw new Error("SecurityError: Request method not allowed");i={method:p,url:h.toString(),async:typeof A!="boolean"?!0:A,user:C||null,password:b||null},k(this.OPENED)},this.setDisableHeaderCheck=function(p){o=p},this.setRequestHeader=function(p,h){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!E(p))return console.warn('Refused to set unsafe header "'+p+'"'),!1;if(_)throw new Error("INVALID_STATE_ERR: send flag is true");return l[p]=h,!0},this.getResponseHeader=function(p){return typeof p=="string"&&this.readyState>this.OPENED&&s.headers[p.toLowerCase()]&&!f?s.headers[p.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||f)return"";var p="";for(var h in s.headers)h!=="set-cookie"&&h!=="set-cookie2"&&(p+=h+": "+s.headers[h]+`\r
`);return p.substr(0,p.length-2)},this.getRequestHeader=function(p){return typeof p=="string"&&l[p]?l[p]:""},this.send=function(p){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(_)throw new Error("INVALID_STATE_ERR: send has already been called");var h=!1,A=!1,C=Do.parse(i.url),b;switch(C.protocol){case"https:":h=!0;case"http:":b=C.hostname;break;case"file:":A=!0;break;case void 0:case"":b="localhost";break;default:throw new Error("Protocol not supported.")}if(A){if(i.method!=="GET")throw new Error("XMLHttpRequest: Only GET method is supported");if(i.async)er.readFile(unescape(C.pathname),function(se,Je){se?r.handleError(se,se.errno||-1):(r.status=200,r.responseText=Je.toString("utf8"),r.response=Je,k(r.DONE))});else try{this.response=er.readFileSync(unescape(C.pathname)),this.responseText=this.response.toString("utf8"),this.status=200,k(r.DONE)}catch(se){this.handleError(se,se.errno||-1)}return}var N=C.port||(h?443:80),O=C.pathname+(C.search?C.search:"");if(l.Host=b,h&&N===443||N===80||(l.Host+=":"+C.port),i.user){typeof i.password>"u"&&(i.password="");var T=new Buffer(i.user+":"+i.password);l.Authorization="Basic "+T.toString("base64")}i.method==="GET"||i.method==="HEAD"?p=null:p?(l["Content-Length"]=Buffer.isBuffer(p)?p.length:Buffer.byteLength(p),l["Content-Type"]||(l["Content-Type"]="text/plain;charset=UTF-8")):i.method==="POST"&&(l["Content-Length"]=0);var M=e.agent||!1,Z={host:b,port:N,path:O,method:i.method,headers:l,agent:M};if(h&&(Z.pfx=e.pfx,Z.key=e.key,Z.passphrase=e.passphrase,Z.cert=e.cert,Z.ca=e.ca,Z.ciphers=e.ciphers,Z.rejectUnauthorized=e.rejectUnauthorized!==!1),f=!1,i.async){var tr=h?n.request:t.request;_=!0,r.dispatchEvent("readystatechange");var Ze=function(se){if(s=se,s.statusCode===302||s.statusCode===303||s.statusCode===307){i.url=s.headers.location;var Je=Do.parse(i.url);b=Je.hostname;var Ue={hostname:Je.hostname,port:Je.port,path:Je.path,method:s.statusCode===303?"GET":i.method,headers:l};h&&(Ue.pfx=e.pfx,Ue.key=e.key,Ue.passphrase=e.passphrase,Ue.cert=e.cert,Ue.ca=e.ca,Ue.ciphers=e.ciphers,Ue.rejectUnauthorized=e.rejectUnauthorized!==!1),a=tr(Ue,Ze).on("error",Ve),a.end();return}k(r.HEADERS_RECEIVED),r.status=s.statusCode,s.on("data",function(Xr){if(Xr){var Lo=Buffer.from(Xr);r.response=Buffer.concat([r.response,Lo])}_&&k(r.LOADING)}),s.on("end",function(){_&&(_=!1,k(r.DONE),r.responseText=r.response.toString("utf8"))}),s.on("error",function(Xr){r.handleError(Xr)})},Ve=function(se){r.handleError(se)};a=tr(Z,Ze).on("error",Ve),e.autoUnref&&a.on("socket",se=>{se.unref()}),p&&a.write(p),a.end(),r.dispatchEvent("loadstart")}else{var rr=".node-xmlhttprequest-content-"+process.pid,nr=".node-xmlhttprequest-sync-"+process.pid;er.writeFileSync(nr,"","utf8");for(var No="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(h?"s":"")+".request;var options = "+JSON.stringify(Z)+";var responseText = '';var responseData = Buffer.alloc(0);var req = doRequest(options, function(response) {response.on('data', function(chunk) {  var data = Buffer.from(chunk);  responseText += data.toString('utf8');  responseData = Buffer.concat([responseData, data]);});response.on('end', function() {fs.writeFileSync('"+rr+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText, data: responseData.toString('base64')}}), 'utf8');fs.unlinkSync('"+nr+"');});response.on('error', function(error) {fs.writeFileSync('"+rr+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+nr+"');});}).on('error', function(error) {fs.writeFileSync('"+rr+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+nr+"');});"+(p?"req.write('"+JSON.stringify(p).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",Wo=Td(process.argv[0],["-e",No]),Od;er.existsSync(nr););if(r.responseText=er.readFileSync(rr,"utf8"),Wo.stdin.end(),er.unlinkSync(rr),r.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var Co=JSON.parse(r.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,""));r.handleError(Co,503)}else{r.status=r.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1");var Jn=JSON.parse(r.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1"));s={statusCode:r.status,headers:Jn.data.headers},r.responseText=Jn.data.text,r.response=Buffer.from(Jn.data.data,"base64"),k(r.DONE,!0)}}},this.handleError=function(p,h){this.status=h||0,this.statusText=p,this.responseText=p.stack,f=!0,k(this.DONE)},this.abort=function(){a&&(a.abort(),a=null),l=Object.assign({},d),this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),f=m=!0,this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||_)&&this.readyState!==this.DONE&&(_=!1,k(this.DONE)),this.readyState=this.UNSENT},this.addEventListener=function(p,h){p in S||(S[p]=[]),S[p].push(h)},this.removeEventListener=function(p,h){p in S&&(S[p]=S[p].filter(function(A){return A!==h}))},this.dispatchEvent=function(p){if(typeof r["on"+p]=="function"&&(this.readyState===this.DONE&&i.async?setTimeout(function(){r["on"+p]()},0):r["on"+p]()),p in S)for(let h=0,A=S[p].length;h<A;h++)this.readyState===this.DONE?setTimeout(function(){S[p][h].call(r)},0):S[p][h].call(r)};var k=function(p){if(!(r.readyState===p||r.readyState===r.UNSENT&&m)&&(r.readyState=p,(i.async||r.readyState<r.OPENED||r.readyState===r.DONE)&&r.dispatchEvent("readystatechange"),r.readyState===r.DONE)){let h;m?h="abort":f?h="error":h="load",r.dispatchEvent(h),r.dispatchEvent("loadend")}}}});var Ne=class extends Error{constructor(r){super(r),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}},te=class extends Ne{},q=class extends Ne{};var z=typeof process<"u"&&process.release&&process.release.name==="node",ar;if(globalThis.document)ar=e=>new Promise((r,t)=>{let n=document.createElement("script");n.src=e,n.onload=()=>r(),n.onerror=t,document.head.appendChild(n)});else if(globalThis.importScripts)ar=async e=>{try{globalThis.importScripts(e)}catch(r){if(r instanceof TypeError)await Promise.resolve().then(()=>Xe(require(e)));else throw r}};else if(z)ar=async e=>{let r=(await Promise.resolve().then(()=>Xe(require("path")))).default;await Promise.resolve().then(()=>Xe(require(r.resolve(e))))};else throw new Ne("Cannot determine runtime environment");var pe={null:0,symbol:1,pairlist:2,closure:3,environment:4,promise:5,call:6,special:7,builtin:8,string:9,logical:10,integer:13,double:14,complex:15,character:16,dots:17,any:18,list:19,expression:20,bytecode:21,pointer:22,weakref:23,raw:24,s4:25,new:30,free:31,function:99};function sr(e){return!!e&&typeof e=="object"&&Object.keys(pe).includes(e.type)}function Ge(e){return!!e&&typeof e=="object"&&"re"in e&&"im"in e}var c={};function ds(e){Object.keys(e).forEach(r=>c._free(e[r]))}function Ke(e){return c._Rf_protect(ie(e)),e}function I(e,r){return c._Rf_protect(ie(e)),++r.n,e}function fs(e){let r=c._malloc(4);return c._R_ProtectWithIndex(ie(e),r),{loc:c.getValue(r,"i32"),ptr:r}}function hs(e){c._Rf_unprotect(1),c._free(e.ptr)}function ps(e,r){return c._R_Reprotect(ie(e),r.loc),e}function L(e){c._Rf_unprotect(e)}function Gn(e,r,t){c._Rf_defineVar(ie(r),ie(t),ie(e))}function Se(e,r){let t={},n={n:0};try{let a=new oe(r);I(a,n),t.code=c.allocateUTF8(e);let s=c._R_ParseEvalString(t.code,a.ptr);return v.wrap(s)}finally{ds(t),L(n.n)}}var wt=class extends Error{constructor(t,n){super(t);this.name="UnwindProtectException",this.cont=n}};function Ye(e,r){return c.getWasmTableEntry(c.GOT.ffi_safe_eval.value)(ie(e),ie(r))}var $o=new WeakMap;function _s(e,r){return $o.set(e,r),e}function Kn(e){return typeof e=="string"&&e.length===ir}var ir=63;function Rt(){let e=Array.from({length:4},Zo).join("-");if(e.length!==ir)throw new Error("comlink internal error: UUID has the wrong length");return e}function Zo(){let e=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16),r=15-e.length;return r>0&&(e=Array.from({length:r},()=>0).join("")+e),e}function ie(e){return nt(e)?e.ptr:e}function at(e,r){if(c._TYPEOF(e.ptr)!==pe[r])throw new Error(`Unexpected object type "${e.type()}" when expecting type "${r}"`)}var Ce=new Map;function st(e,r){let t=ie(r);if(c._R_PreserveObject(t),e!==void 0){if(Kn(e)){Ce.get(e).push(t);return}throw new Error("Unexpected shelter type "+typeof e)}}function Yn(e,r){let t=ie(r);c._R_ReleaseObject(t);let n=Ce.get(e),a=n.indexOf(t);if(a<0)throw new Error("Can't find object in shelter.");n.splice(a,1)}function Qn(e){let r=Ce.get(e);for(let t of r)try{c._R_ReleaseObject(t)}catch(n){console.error(n)}Ce.set(e,[])}function gs(e){if(sr(e))return new(or(e.type))(e);if(typeof e>"u")return new Tt;if(e&&typeof e=="object"&&"type"in e&&e.type==="null")return new Tt;if(e===null)return new re({type:"logical",names:null,values:[null]});if(typeof e=="boolean")return new re(e);if(typeof e=="number")return new We(e);if(typeof e=="string")return new le(e);if(Ge(e))return new et(e);if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)return new tt(e);if(Array.isArray(e))return Vo(e);if(typeof e=="object")return ge.fromObject(e);throw new Error("R object construction for this JS object is not yet supported.")}function Vo(e){let r={n:0};if(e.every(n=>n&&typeof n=="object"&&!nt(n)&&!Ge(n))){let n=e,a=n.every(i=>Object.keys(i).filter(o=>!Object.keys(n[0]).includes(o)).length===0&&Object.keys(n[0]).filter(o=>!Object.keys(i).includes(o)).length===0),s=n.every(i=>Object.values(i).every(o=>ys(o)||ms(o)));if(a&&s)return ge.fromD3(n)}if(e.every(n=>typeof n=="boolean"||n===null))return new re(e);if(e.every(n=>typeof n=="number"||n===null))return new We(e);if(e.every(n=>typeof n=="string"||n===null))return new le(e);try{let n=new ce([new H("c"),...e]);return I(n,r),n.eval()}finally{L(r.n)}}var j=class{constructor(r){this.ptr=r}type(){let r=c._TYPEOF(this.ptr);return Object.keys(pe).find(n=>pe[n]===r)}},vt,Gr,Qe=class extends j{constructor(t){if(!(t instanceof j))return gs(t);super(t.ptr);x(this,vt)}static wrap(t){let n=c._TYPEOF(t),a=Object.keys(pe)[Object.values(pe).indexOf(n)];return new(or(a))(new j(t))}get[Symbol.toStringTag](){return`RObject:${this.type()}`}static getPersistentObject(t){return F[t]}getPropertyValue(t){return this[t]}inspect(){Se(".Internal(inspect(x))",{x:this})}isNull(){return c._TYPEOF(this.ptr)===pe.null}isNa(){try{let t=Se("is.na(x)",{x:this});return Ke(t),t.toBoolean()}finally{L(1)}}isUnbound(){return this.ptr===F.unboundValue.ptr}attrs(){return ke.wrap(c._ATTRIB(this.ptr))}class(){let t={n:0},n=new ce([new H("class"),this]);I(n,t);try{return n.eval()}finally{L(t.n)}}setNames(t){let n;if(t===null)n=F.null;else if(Array.isArray(t)&&t.every(a=>typeof a=="string"||a===null))n=new le(t);else throw new Error("Argument to setNames must be null or an Array of strings or null");return c._Rf_setAttrib(this.ptr,F.namesSymbol.ptr,n.ptr),this}names(){let t=le.wrap(c._Rf_getAttrib(this.ptr,F.namesSymbol.ptr));return t.isNull()?null:t.toArray()}includes(t){let n=this.names();return n&&n.includes(t)}toJs(t={depth:0},n=1){throw new Error("This R object cannot be converted to JS")}subset(t){return K(this,vt,Gr).call(this,t,F.bracketSymbol.ptr)}get(t){return K(this,vt,Gr).call(this,t,F.bracket2Symbol.ptr)}getDollar(t){return K(this,vt,Gr).call(this,t,F.dollarSymbol.ptr)}pluck(...t){let n=fs(F.null);try{let a=(i,o)=>{let d=i.get(o);return ps(d,n)},s=t.reduce(a,this);return s.isNull()?void 0:s}finally{hs(n)}}set(t,n){let a={n:0};try{let s=new Qe(t);I(s,a);let i=new Qe(n);I(i,a);let o=new H("[[<-"),d=c._Rf_lang4(o.ptr,this.ptr,s.ptr,i.ptr);return I(d,a),Qe.wrap(Ye(d,F.baseEnv))}finally{L(a.n)}}static getMethods(t){let n=new Set,a=t;do Object.getOwnPropertyNames(a).map(s=>n.add(s));while(a=Object.getPrototypeOf(a));return[...n.keys()].filter(s=>typeof t[s]=="function")}},v=Qe;vt=new WeakSet,Gr=function(t,n){let a={n:0};try{let s=new Qe(t);I(s,a);let i=c._Rf_lang3(n,this.ptr,s.ptr);return I(i,a),Qe.wrap(Ye(i,F.baseEnv))}finally{L(a.n)}};var Tt=class extends v{constructor(){return super(new j(c.getValue(c._R_NilValue,"*"))),this}toJs(){return{type:"null"}}},H=class extends v{constructor(r){if(r instanceof j){at(r,"symbol"),super(r);return}let t=c.allocateUTF8(r);try{super(new j(c._Rf_install(t)))}finally{c._free(t)}}toJs(){let r=this.toObject();return{type:"symbol",printname:r.printname,symvalue:r.symvalue,internal:r.internal}}toObject(){return{printname:this.printname().isUnbound()?null:this.printname().toString(),symvalue:this.symvalue().isUnbound()?null:this.symvalue().ptr,internal:this.internal().isNull()?null:this.internal().ptr}}toString(){return this.printname().toString()}printname(){return rt.wrap(c._PRINTNAME(this.ptr))}symvalue(){return v.wrap(c._SYMVALUE(this.ptr))}internal(){return v.wrap(c._INTERNAL(this.ptr))}},ke=class extends v{constructor(r){if(r instanceof j)return at(r,"pairlist"),super(r),this;let t={n:0};try{let{names:n,values:a}=St(r),s=ke.wrap(c._Rf_allocList(a.length));I(s,t);for(let[i,o]=[0,s];!o.isNull();[i,o]=[i+1,o.cdr()])o.setcar(new v(a[i]));s.setNames(n),super(s)}finally{L(t.n)}}get length(){return this.toArray().length}toArray(r={depth:1}){return this.toJs(r).values}toObject({allowDuplicateKey:r=!0,allowEmptyKey:t=!1,depth:n=-1}={}){let a=this.entries({depth:n}),s=a.map(([i])=>i);if(!r&&new Set(s).size!==s.length)throw new Error("Duplicate key when converting pairlist without allowDuplicateKey enabled");if(!t&&s.some(i=>!i))throw new Error("Empty or null key when converting pairlist without allowEmptyKey enabled");return Object.fromEntries(a.filter((i,o)=>a.findIndex(d=>d[0]===i[0])===o))}entries(r={depth:1}){let t=this.toJs(r);return t.values.map((n,a)=>[t.names?t.names[a]:null,n])}toJs(r={depth:0},t=1){let n=[],a=!1,s=[];for(let o=this;!o.isNull();o=o.cdr()){let d=o.tag();d.isNull()?n.push(""):(a=!0,n.push(d.toString())),r.depth&&t>=r.depth?s.push(o.car()):s.push(o.car().toJs(r,t+1))}return{type:"pairlist",names:a?n:null,values:s}}includes(r){return r in this.toObject()}setcar(r){c._SETCAR(this.ptr,r.ptr)}car(){return v.wrap(c._CAR(this.ptr))}cdr(){return v.wrap(c._CDR(this.ptr))}tag(){return v.wrap(c._TAG(this.ptr))}},ce=class extends v{constructor(r){if(r instanceof j)return at(r,"call"),super(r),this;let t={n:0};try{let{values:n}=St(r),a=n.map(i=>I(new v(i),t)),s=ce.wrap(c._Rf_allocVector(pe.call,n.length));I(s,t);for(let[i,o]=[0,s];!o.isNull();[i,o]=[i+1,o.cdr()])o.setcar(a[i]);super(s)}finally{L(t.n)}}setcar(r){c._SETCAR(this.ptr,r.ptr)}car(){return v.wrap(c._CAR(this.ptr))}cdr(){return v.wrap(c._CDR(this.ptr))}eval(){return c.webr.evalR(this,{env:F.baseEnv})}capture(r={}){return c.webr.captureR(this,r)}deparse(){let r={n:0};try{let t=c._Rf_lang2(new H("deparse1").ptr,c._Rf_lang2(new H("quote").ptr,this.ptr));I(t,r);let n=le.wrap(Ye(t,F.baseEnv));return I(n,r),n.toString()}finally{L(r.n)}}},ue=class extends v{constructor(r,t=null){if(r instanceof j){if(at(r,"list"),super(r),t){if(t.length!==this.length)throw new Error("Can't construct named `RList`. Supplied `names` must be the same length as the list.");this.setNames(t)}return this}let n={n:0};try{let a=St(r),s=c._Rf_allocVector(pe.list,a.values.length);I(s,n),a.values.forEach((o,d)=>{bs(o)?c._SET_VECTOR_ELT(s,d,new ue(o).ptr):c._SET_VECTOR_ELT(s,d,new v(o).ptr)});let i=t||a.names;if(i&&i.length!==a.values.length)throw new Error("Can't construct named `RList`. Supplied `names` must be the same length as the list.");v.wrap(s).setNames(i),super(new j(s))}finally{L(n.n)}}get length(){return c._LENGTH(this.ptr)}isDataFrame(){let r=ke.wrap(c._ATTRIB(this.ptr)).get("class");return!r.isNull()&&r.toArray().includes("data.frame")}toArray(r={depth:1}){return this.toJs(r).values}toObject({allowDuplicateKey:r=!0,allowEmptyKey:t=!1,depth:n=-1}={}){let a=this.entries({depth:n}),s=a.map(([i])=>i);if(!r&&new Set(s).size!==s.length)throw new Error("Duplicate key when converting list without allowDuplicateKey enabled");if(!t&&s.some(i=>!i))throw new Error("Empty or null key when converting list without allowEmptyKey enabled");return Object.fromEntries(a.filter((i,o)=>a.findIndex(d=>d[0]===i[0])===o))}toD3(){if(!this.isDataFrame())throw new Error("Can't convert R list object to D3 format. Object must be of class 'data.frame'.");return this.entries().reduce((t,n)=>(n[1].forEach((a,s)=>t[s]=Object.assign(t[s]||{},{[n[0]]:a})),t),[])}entries(r={depth:-1}){let t=this.toJs(r);return this.isDataFrame()&&r.depth<0&&(t.values=t.values.map(n=>n.toArray())),t.values.map((n,a)=>[t.names?t.names[a]:null,n])}toJs(r={depth:0},t=1){return{type:"list",names:this.names(),values:[...Array(this.length).keys()].map(n=>r.depth&&t>=r.depth?this.get(n+1):this.get(n+1).toJs(r,t+1))}}},ge=class extends ue{constructor(r){if(r instanceof j){if(super(r),!this.isDataFrame())throw new Error("Can't construct `RDataFrame`. Supplied R object is not a `data.frame`.");return this}return ge.fromObject(r)}static fromObject(r){let{names:t,values:n}=St(r),a={n:0};try{let s=!!t&&t.length>0&&t.every(o=>o),i=n.length>0&&n.every(o=>Array.isArray(o)||ArrayBuffer.isView(o)||o instanceof ArrayBuffer);if(s&&i){let o=n,d=o.every(u=>u.length===o[0].length),l=o.every(u=>ys(u[0])||ms(u[0]));if(d&&l){let u=new ue({type:"list",names:t,values:o.map(_=>gs(_))});I(u,a);let w=new ce([new H("as.data.frame"),u]);return I(w,a),new ge(w.eval())}}}finally{L(a.n)}throw new Error("Can't construct `data.frame`. Source object is not eligible.")}static fromD3(r){return this.fromObject(Object.fromEntries(Object.keys(r[0]).map(t=>[t,r.map(n=>n[t])])))}},xt=class extends v{exec(...r){let t={n:0};try{let n=new ce([this,...r]);return I(n,t),n.eval()}finally{L(t.n)}}capture(r={},...t){let n={n:0};try{let a=new ce([this,...t]);return I(a,n),a.capture(r)}finally{L(n.n)}}},rt=class extends v{constructor(r){if(r instanceof j){at(r,"string"),super(r);return}let t=c.allocateUTF8(r);try{super(new j(c._Rf_mkChar(t)))}finally{c._free(t)}}toString(){return c.UTF8ToString(c._R_CHAR(this.ptr))}toJs(){return{type:"string",value:this.toString()}}},oe=class extends v{constructor(r={}){if(r instanceof j)return at(r,"environment"),super(r),this;let t=0;try{let{names:n,values:a}=St(r),s=Ke(c._R_NewEnv(F.globalEnv.ptr,0,0));++t,a.forEach((i,o)=>{let d=n?n[o]:null;if(!d)throw new Error("Can't create object in new environment with empty symbol name");let l=new H(d),u=Ke(new v(i));try{Gn(s,l,u)}finally{L(1)}}),super(new j(s))}finally{L(t)}}ls(r=!1,t=!0){return le.wrap(c._R_lsInternal3(this.ptr,Number(r),Number(t))).toArray()}bind(r,t){let n=new H(r),a=Ke(new v(t));try{Gn(this,n,a)}finally{L(1)}}names(){return this.ls(!0,!0)}frame(){return v.wrap(c._FRAME(this.ptr))}subset(r){if(typeof r=="number")throw new Error("Object of type environment is not subsettable");return this.getDollar(r)}toObject({depth:r=-1}={}){let t=this.names();return Object.fromEntries([...Array(t.length).keys()].map(n=>{let a=this.getDollar(t[n]);return[t[n],r<0?a:a.toJs({depth:r})]}))}toJs(r={depth:0},t=1){let n=this.names(),a=[...Array(n.length).keys()].map(s=>r.depth&&t>=r.depth?this.getDollar(n[s]):this.getDollar(n[s]).toJs(r,t+1));return{type:"environment",names:n,values:a}}},Le=class extends v{constructor(r,t,n){if(r instanceof j)return at(r,t),super(r),this;let a={n:0};try{let{names:s,values:i}=St(r),o=c._Rf_allocVector(pe[t],i.length);I(o,a),i.forEach(n(o)),v.wrap(o).setNames(s),super(new j(o))}finally{L(a.n)}}get length(){return c._LENGTH(this.ptr)}get(r){return super.get(r)}subset(r){return super.subset(r)}getDollar(){throw new Error("$ operator is invalid for atomic vectors")}detectMissing(){let r={n:0};try{let t=c._Rf_lang2(new H("is.na").ptr,this.ptr);I(t,r);let n=re.wrap(Ye(t,F.baseEnv));I(n,r);let a=n.toTypedArray();return Array.from(a).map(s=>!!s)}finally{L(r.n)}}toArray(){let r=this.toTypedArray();return this.detectMissing().map((t,n)=>t?null:r[n])}toObject({allowDuplicateKey:r=!0,allowEmptyKey:t=!1}={}){let n=this.entries(),a=n.map(([s])=>s);if(!r&&new Set(a).size!==a.length)throw new Error("Duplicate key when converting atomic vector without allowDuplicateKey enabled");if(!t&&a.some(s=>!s))throw new Error("Empty or null key when converting atomic vector without allowEmptyKey enabled");return Object.fromEntries(n.filter((s,i)=>n.findIndex(o=>o[0]===s[0])===i))}entries(){let r=this.toArray(),t=this.names();return r.map((n,a)=>[t?t[a]:null,n])}toJs(){return{type:this.type(),names:this.names(),values:this.toArray()}}},Kr,ta=class extends Le{constructor(r){super(r,"logical",g(ta,Kr))}getBoolean(r){return this.get(r).toArray()[0]}toBoolean(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getBoolean(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS boolean");return r}toTypedArray(){return new Int32Array(c.HEAP32.subarray(c._LOGICAL(this.ptr)/4,c._LOGICAL(this.ptr)/4+this.length))}toArray(){let r=this.toTypedArray();return this.detectMissing().map((t,n)=>t?null:!!r[n])}},re=ta;Kr=new WeakMap,x(re,Kr,r=>{let t=c._LOGICAL(r),n=c.getValue(c._R_NaInt,"i32");return(a,s)=>{c.setValue(t+4*s,a===null?n:!!a,"i32")}});var Yr,ra=class extends Le{constructor(r){super(r,"integer",g(ra,Yr))}getNumber(r){return this.get(r).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getNumber(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS number");return r}toTypedArray(){return new Int32Array(c.HEAP32.subarray(c._INTEGER(this.ptr)/4,c._INTEGER(this.ptr)/4+this.length))}},Et=ra;Yr=new WeakMap,x(Et,Yr,r=>{let t=c._INTEGER(r),n=c.getValue(c._R_NaInt,"i32");return(a,s)=>{c.setValue(t+4*s,a===null?n:Math.round(Number(a)),"i32")}});var Qr,na=class extends Le{constructor(r){super(r,"double",g(na,Qr))}getNumber(r){return this.get(r).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getNumber(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS number");return r}toTypedArray(){return new Float64Array(c.HEAPF64.subarray(c._REAL(this.ptr)/8,c._REAL(this.ptr)/8+this.length))}},We=na;Qr=new WeakMap,x(We,Qr,r=>{let t=c._REAL(r),n=c.getValue(c._R_NaReal,"double");return(a,s)=>{c.setValue(t+8*s,a===null?n:a,"double")}});var en,aa=class extends Le{constructor(r){super(r,"complex",g(aa,en))}getComplex(r){return this.get(r).toArray()[0]}toComplex(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getComplex(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS object");return r}toTypedArray(){return new Float64Array(c.HEAPF64.subarray(c._COMPLEX(this.ptr)/8,c._COMPLEX(this.ptr)/8+2*this.length))}toArray(){let r=this.toTypedArray();return this.detectMissing().map((t,n)=>t?null:{re:r[2*n],im:r[2*n+1]})}},et=aa;en=new WeakMap,x(et,en,r=>{let t=c._COMPLEX(r),n=c.getValue(c._R_NaReal,"double");return(a,s)=>{c.setValue(t+8*(2*s),a===null?n:a.re,"double"),c.setValue(t+8*(2*s+1),a===null?n:a.im,"double")}});var tn,sa=class extends Le{constructor(r){super(r,"character",g(sa,tn))}getString(r){return this.get(r).toArray()[0]}toString(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getString(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS string");return r}toTypedArray(){return new Uint32Array(c.HEAPU32.subarray(c._STRING_PTR(this.ptr)/4,c._STRING_PTR(this.ptr)/4+this.length))}toArray(){return this.detectMissing().map((r,t)=>r?null:c.UTF8ToString(c._R_CHAR(c._STRING_ELT(this.ptr,t))))}},le=sa;tn=new WeakMap,x(le,tn,r=>(t,n)=>{t===null?c._SET_STRING_ELT(r,n,F.naString.ptr):c._SET_STRING_ELT(r,n,new rt(t).ptr)});var rn,ia=class extends Le{constructor(r){r instanceof ArrayBuffer&&(r=new Uint8Array(r)),super(r,"raw",g(ia,rn))}getNumber(r){return this.get(r).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getNumber(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS number");return r}toTypedArray(){return new Uint8Array(c.HEAPU8.subarray(c._RAW(this.ptr),c._RAW(this.ptr)+this.length))}},tt=ia;rn=new WeakMap,x(tt,rn,r=>{let t=c._RAW(r);return(n,a)=>{c.setValue(t+a,Number(n),"i8")}});function St(e){return sr(e)?e:Array.isArray(e)||ArrayBuffer.isView(e)?{names:null,values:e}:e&&typeof e=="object"&&!Ge(e)?{names:Object.keys(e),values:Object.values(e)}:{names:null,values:[e]}}function or(e){let r={object:v,null:Tt,symbol:H,pairlist:ke,closure:xt,environment:oe,call:ce,special:xt,builtin:xt,string:rt,logical:re,integer:Et,double:We,complex:et,character:le,list:ue,raw:tt,function:xt,dataframe:ge};return e in r?r[e]:v}function nt(e){return e instanceof v}function ms(e){let r=["logical","integer","double","complex","character"];return nt(e)&&r.includes(e.type())||nt(e)&&e.isNa()}function ys(e){return e===null||typeof e=="number"||typeof e=="boolean"||typeof e=="string"||Ge(e)}var F;function ea(){F={baseEnv:oe.wrap(c.getValue(c._R_BaseEnv,"*")),bracket2Symbol:H.wrap(c.getValue(c._R_Bracket2Symbol,"*")),bracketSymbol:H.wrap(c.getValue(c._R_BracketSymbol,"*")),dollarSymbol:H.wrap(c.getValue(c._R_DollarSymbol,"*")),emptyEnv:oe.wrap(c.getValue(c._R_EmptyEnv,"*")),false:re.wrap(c.getValue(c._R_FalseValue,"*")),globalEnv:oe.wrap(c.getValue(c._R_GlobalEnv,"*")),na:re.wrap(c.getValue(c._R_LogicalNAValue,"*")),namesSymbol:H.wrap(c.getValue(c._R_NamesSymbol,"*")),naString:v.wrap(c.getValue(c._R_NaString,"*")),null:Tt.wrap(c.getValue(c._R_NilValue,"*")),true:re.wrap(c.getValue(c._R_TrueValue,"*")),unboundValue:v.wrap(c.getValue(c._R_UnboundValue,"*"))}}function Ae(){let e={resolve:()=>{},reject:()=>{},promise:Promise.resolve()},r=new Promise((t,n)=>{e.resolve=t,e.reject=n});return e.promise=r,e}function ws(e){return new Promise(r=>setTimeout(r,e))}function it(e,r,t,...n){return e==null||Jo(e)?e:e instanceof ArrayBuffer?new Uint8Array(e):r(e)?t(e,...n):Array.isArray(e)||ArrayBuffer.isView(e)?e.map(a=>it(a,r,t,...n)):e instanceof j?e:typeof e=="object"?Object.fromEntries(Object.entries(e).map(([a,s])=>[a,it(s,r,t,...n)])):e}function kt(e,r){let t=new XMLHttpRequest;t.open("get",e,!0),t.onload=()=>{let n=new Worker(URL.createObjectURL(new Blob([t.responseText])));r(n)},t.send()}function At(e){if(z)return!1;let r=new URL(location.href),t=new URL(e,location.origin);return!(r.host===t.host&&r.port===t.port&&r.protocol===t.protocol)}function Jo(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap}function nn(e){let r="Reached the unreachable";throw r=r+(e?": "+e:"."),new Ne(r)}function bs(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&!ArrayBuffer.isView(e)&&!Ge(e)&&!sr(e)&&!(e instanceof Date)&&!(e instanceof RegExp)&&!(e instanceof Error)&&!(e instanceof j)&&Object.getPrototypeOf(e)===Object.prototype}var qs=Xe(bn());var Ll=new TextEncoder;async function Hs(e,r,t){try{let{taskId:n,sizeBuffer:a,dataBuffer:s,signalBuffer:i}=r,o=(0,qs.encode)(t),d=o.length<=s.length;if(Atomics.store(a,0,o.length),Atomics.store(a,1,+d),!d){let[l,u]=Fl(e);s.set(Ll.encode(l)),await js(i,n),s=(await u).dataBuffer}s.set(o),Atomics.store(a,1,1),await js(i,n)}catch(n){console.warn(n)}}function Fl(e){let r=Rt();return[r,new Promise(t=>{z?e.once("message",n=>{!n.id||n.id!==r||t(n)}):e.addEventListener("message",function n(a){!a.data||!a.data.id||a.data.id!==r||(e.removeEventListener("message",n),t(a.data))}),e.start&&e.start()})]}async function js(e,r){let t=(r>>1)%32,n=1;for(;Atomics.compareExchange(e,t+1,0,r)!==0;)await ws(n),n<32&&(n*=2);Atomics.or(e,0,1<<t),Atomics.notify(e,0)}var we,Re,hr,Ta,Pt=class{constructor(){x(this,hr);x(this,we,void 0);x(this,Re,void 0);P(this,Re,[]),P(this,we,[])}reset(){P(this,Re,[]),P(this,we,[])}put(r){g(this,Re).length||K(this,hr,Ta).call(this),g(this,Re).shift()(r)}async get(){return g(this,we).length||K(this,hr,Ta).call(this),g(this,we).shift()}isEmpty(){return!g(this,we).length}isBlocked(){return!!g(this,Re).length}get length(){return g(this,we).length-g(this,Re).length}};we=new WeakMap,Re=new WeakMap,hr=new WeakSet,Ta=function(){g(this,we).push(new Promise(r=>{g(this,Re).push(r)}))};function It(e,r){return $s({type:"request",data:{uuid:Rt(),msg:e}},r)}function lt(e,r,t){return $s({type:"response",data:{uuid:e,resp:r}},t)}function $s(e,r){return r&&_s(e,r),e}function Zs(e,r){return{type:"sync-request",data:{msg:e,reqData:r}}}function Vs(e){let r=new te(e.obj.message);return e.obj.name!=="Error"&&(r.name=e.obj.name),r.stack=e.obj.stack,r}function Bl(e){return!!e&&typeof e=="object"&&"payloadType"in e&&"obj"in e}function pr(e){return Bl(e)&&e.payloadType==="ptr"}var Ut,_r,Be=class{constructor(){this.inputQueue=new Pt;this.outputQueue=new Pt;this.systemQueue=new Pt;x(this,Ut,new Map);x(this,_r,!1)}async read(){return await this.outputQueue.get()}async flush(){let r=[];for(;!this.outputQueue.isEmpty();)r.push(await this.read());return r}async readSystem(){return await this.systemQueue.get()}write(r){if(g(this,_r))throw new q("The webR communication channel has been closed.");this.inputQueue.put(r)}async request(r,t){let n=It(r,t),{resolve:a,reject:s,promise:i}=Ae();return g(this,Ut).set(n.data.uuid,{resolve:a,reject:s}),this.write(n),i}putClosedMessage(){P(this,_r,!0),this.outputQueue.put({type:"closed"})}resolveResponse(r){let t=r.data.uuid,n=g(this,Ut).get(t);if(n){let a=r.data.resp;g(this,Ut).delete(t),a.payloadType==="err"?n.reject(Vs(a)):n.resolve(a)}else console.warn("Can't find request.")}};Ut=new WeakMap,_r=new WeakMap;var Xs=Xe(bn());var jl=new TextDecoder("utf-8"),Nt,Wt,gr,mr,Ct,En=class{constructor(r,t,n=[]){x(this,Nt,!1);x(this,Wt,void 0);x(this,gr,void 0);x(this,mr,void 0);x(this,Ct,void 0);this.syncifier=new Sa;this.endpoint=r,this.msg=t,this.transfers=n,P(this,Wt,!1)}scheduleSync(){if(!g(this,Nt))return P(this,Nt,!0),this.syncifier.scheduleTask(this),P(this,Ct,this.doSync()),g(this,Ct).next(),this}poll(){if(!g(this,Nt))throw new Error("Task not synchronously scheduled");let{done:r,value:t}=g(this,Ct).next();return r?(P(this,Wt,!0),P(this,gr,t),!0):!1}*doSync(){let{endpoint:r,msg:t,transfers:n}=this,a=new Int32Array(new SharedArrayBuffer(8)),s=this.signalBuffer,i=this.taskId,o=Js(ir),d=Zs(t,{sizeBuffer:a,dataBuffer:o,signalBuffer:s,taskId:i});if(r.postMessage(d,n),yield,Atomics.load(a,1)===0){let u=jl.decode(o.slice(0,ir));ql(o);let w=Atomics.load(a,0);o=Js(w),r.postMessage({id:u,dataBuffer:o}),yield}let l=Atomics.load(a,0);return(0,Xs.decode)(o.slice(0,l))}get result(){if(g(this,mr))throw g(this,mr);if(g(this,Wt))return g(this,gr);throw new Error("Not ready.")}syncify(){return this.scheduleSync(),this.syncifier.syncifyTask(this),this.result}};Nt=new WeakMap,Wt=new WeakMap,gr=new WeakMap,mr=new WeakMap,Ct=new WeakMap;var Sa=class{constructor(){this.nextTaskId=new Int32Array([1]),this.signalBuffer=new Int32Array(new SharedArrayBuffer(32*4+4)),this.tasks=new Map}scheduleTask(r){r.taskId=this.nextTaskId[0],this.nextTaskId[0]+=2,r.signalBuffer=this.signalBuffer,this.tasks.set(r.taskId,r)}waitOnSignalBuffer(){for(;;)switch(Atomics.wait(this.signalBuffer,0,0,50)){case"ok":case"not-equal":return;case"timed-out":ka[0]!==0&&Gs();break;default:throw new Error("Unreachable")}}*tasksIdsToWakeup(){let r=Atomics.load(this.signalBuffer,0);for(let t=0;t<32;t++){let n=1<<t;r&n&&(Atomics.and(this.signalBuffer,0,~n),yield Atomics.exchange(this.signalBuffer,t+1,0))}}pollTasks(r){let t=!1;for(let n of this.tasksIdsToWakeup()){let a=this.tasks.get(n);if(!a)throw new Error(`Assertion error: unknown taskId ${n}.`);a.poll()&&(this.tasks.delete(n),a===r&&(t=!0))}return t}syncifyTask(r){for(;;)if(this.waitOnSignalBuffer(),this.pollTasks(r))return}},xn=[];function Js(e){let r=Math.ceil(Math.log2(e));xn[r]||(xn[r]=[]);let t=xn[r].pop();return t?(t.fill(0),t):new Uint8Array(new SharedArrayBuffer(2**r))}function ql(e){let r=Math.ceil(Math.log2(e.byteLength));xn[r].push(e)}var ka=new Int32Array(new ArrayBuffer(4)),Gs=()=>{throw ka[0]=0,new Error("Interrupted!")};function Ks(e){Gs=e}function Ys(e){ka=new Int32Array(e)}z&&(globalThis.Worker=require("worker_threads").Worker);var Lt,Tn,Qs,yr,Aa=class extends Be{constructor(t){super();x(this,Tn);x(this,Lt,void 0);this.close=()=>{};x(this,yr,async(t,n)=>{if(!(!n||!n.type))switch(n.type){case"resolve":P(this,Lt,new Int32Array(n.data)),this.resolve();return;case"response":this.resolveResponse(n);return;case"system":this.systemQueue.put(n.data);return;default:this.outputQueue.put(n);return;case"sync-request":{let a=n,s=a.data.msg,i=a.data.reqData;switch(s.type){case"read":{let o=await this.inputQueue.get();await Hs(t,i,o);break}default:throw new q(`Unsupported request type '${s.type}'.`)}return}case"request":throw new q("Can't send messages of type 'request' from a worker. Please Use 'sync-request' instead.")}});({resolve:this.resolve,reject:this.reject,promise:this.initialised}=Ae());let n=a=>{K(this,Tn,Qs).call(this,a),this.close=()=>{a.terminate(),this.putClosedMessage()};let s={type:"init",data:{config:t,channelType:_e.SharedArrayBuffer}};a.postMessage(s)};if(At(t.baseUrl))kt(`${t.baseUrl}webr-worker.js`,a=>n(a));else{let a=new Worker(`${t.baseUrl}webr-worker.js`);n(a)}}interrupt(){if(!g(this,Lt))throw new q("Failed attempt to interrupt before initialising interruptBuffer");this.inputQueue.reset(),g(this,Lt)[0]=1}};Lt=new WeakMap,Tn=new WeakSet,Qs=function(t){z?(t.on("message",n=>{g(this,yr).call(this,t,n)}),t.on("error",n=>{console.error(n),this.reject(new te("An error occurred initialising the webR SharedBufferChannel worker."))})):(t.onmessage=n=>g(this,yr).call(this,t,n.data),t.onerror=n=>{console.error(n),this.reject(new te("An error occurred initialising the webR SharedBufferChannel worker."))})},yr=new WeakMap;var ct,br,ut,wr,vn=class{constructor(){x(this,ct,void 0);x(this,br,()=>0);x(this,ut,new Int32Array(new SharedArrayBuffer(4)));x(this,wr,()=>{});this.onMessageFromMainThread=()=>{};P(this,ct,z?require("worker_threads").parentPort:globalThis),Ys(g(this,ut).buffer),Ks(()=>this.handleInterrupt())}resolve(){this.write({type:"resolve",data:g(this,ut).buffer})}write(r,t){g(this,ct).postMessage(r,t)}writeSystem(r,t){g(this,ct).postMessage({type:"system",data:r},t)}read(){let r={type:"read"};return new En(g(this,ct),r).syncify()}inputOrDispatch(){for(;;){let r=this.read();if(r.type==="stdin")return c.allocateUTF8(r.data);g(this,br).call(this,r)}}run(r){try{c.callMain(r)}catch(t){throw t instanceof WebAssembly.RuntimeError&&(this.writeSystem({type:"console.error",data:t.message}),this.writeSystem({type:"console.error",data:"An unrecoverable WebAssembly error has occurred, the webR worker will be closed."}),this.writeSystem({type:"close"})),t}}setInterrupt(r){P(this,wr,r)}handleInterrupt(){g(this,ut)[0]!==0&&(g(this,ut)[0]=0,g(this,wr).call(this))}setDispatchHandler(r){P(this,br,r)}};ct=new WeakMap,br=new WeakMap,ut=new WeakMap,wr=new WeakMap;var Mn=Xe(bn());z&&(globalThis.Worker=require("worker_threads").Worker);var Ft,dt,Bt,kn,ei,An,ti,Dn,ri,Rr,Da=class extends Be{constructor(t){super();x(this,kn);x(this,An);x(this,Dn);this.close=()=>{};x(this,Ft,new Map);x(this,dt,void 0);x(this,Bt,!1);x(this,Rr,(t,n)=>{if(!(!n||!n.type))switch(n.type){case"resolve":this.resolve();return;case"response":this.resolveResponse(n);return;case"system":this.systemQueue.put(n.data);return;default:this.outputQueue.put(n);return;case"sync-request":{let a=n.data;g(this,Ft).set(a.data.uuid,a.data.msg);return}case"request":throw new q("Can't send messages of type 'request' from a worker.Use service worker fetch request instead.")}});({resolve:this.resolve,reject:this.reject,promise:this.initialised}=Ae()),console.warn("The ServiceWorker communication channel is deprecated and will be removed in a future version of webR. Consider using the PostMessage channel instead. If blocking input is required (for example, `browser()`) the SharedArrayBuffer channel should be used. See https://docs.r-wasm.org/webr/latest/serving.html for further information.");let n=a=>{K(this,Dn,ri).call(this,a),this.close=()=>{a.terminate(),this.putClosedMessage()},K(this,kn,ei).call(this,`${t.serviceWorkerUrl}webr-serviceworker.js`).then(s=>{let i={type:"init",data:{config:t,channelType:_e.ServiceWorker,clientId:s,location:window.location.href}};a.postMessage(i)})};if(At(t.serviceWorkerUrl))kt(`${t.serviceWorkerUrl}webr-worker.js`,a=>n(a));else{let a=new Worker(`${t.serviceWorkerUrl}webr-worker.js`);n(a)}}activeRegistration(){var t;if(!((t=g(this,dt))!=null&&t.active))throw new q("Attempted to obtain a non-existent active registration.");return g(this,dt).active}interrupt(){P(this,Bt,!0)}};Ft=new WeakMap,dt=new WeakMap,Bt=new WeakMap,kn=new WeakSet,ei=async function(t){P(this,dt,await navigator.serviceWorker.register(t)),await navigator.serviceWorker.ready,window.addEventListener("beforeunload",()=>{var a;(a=g(this,dt))==null||a.unregister()});let n=await new Promise(a=>{navigator.serviceWorker.addEventListener("message",function s(i){i.data.type==="registration-successful"&&(navigator.serviceWorker.removeEventListener("message",s),a(i.data.clientId))}),this.activeRegistration().postMessage({type:"register-client-main"})});return navigator.serviceWorker.addEventListener("message",a=>{K(this,An,ti).call(this,a)}),n},An=new WeakSet,ti=async function(t){if(t.data.type==="request"){let n=t.data.data,a=g(this,Ft).get(n);if(!a)throw new q("Request not found during service worker XHR request");switch(g(this,Ft).delete(n),a.type){case"read":{let s=await this.inputQueue.get();this.activeRegistration().postMessage({type:"wasm-webr-fetch-response",uuid:n,response:lt(n,s)});break}case"interrupt":{let s=g(this,Bt);this.activeRegistration().postMessage({type:"wasm-webr-fetch-response",uuid:n,response:lt(n,s)}),this.inputQueue.reset(),P(this,Bt,!1);break}default:throw new q(`Unsupported request type '${a.type}'.`)}return}},Dn=new WeakSet,ri=function(t){z?(t.on("message",n=>{g(this,Rr).call(this,t,n)}),t.on("error",n=>{console.error(n),this.reject(new te("An error occurred initialising the webR ServiceWorkerChannel worker."))})):(t.onmessage=n=>g(this,Rr).call(this,t,n.data),t.onerror=n=>{console.error(n),this.reject(new te("An error occurred initialising the webR ServiceWorkerChannel worker."))})},Rr=new WeakMap;var zt,xr,Er,vr,Tr,Sr,Sn=class{constructor(r){x(this,zt,void 0);x(this,xr,void 0);x(this,Er,void 0);x(this,vr,Date.now());x(this,Tr,()=>0);x(this,Sr,()=>{});this.onMessageFromMainThread=()=>{};if(!r.clientId||!r.location)throw new q("Can't start service worker channel");P(this,xr,r.clientId),P(this,Er,r.location),P(this,zt,z?require("worker_threads").parentPort:globalThis)}resolve(){this.write({type:"resolve"})}write(r,t){g(this,zt).postMessage(r,t)}writeSystem(r,t){g(this,zt).postMessage({type:"system",data:r},t)}syncRequest(r){let t=It(r);this.write({type:"sync-request",data:t});let n=0;for(;;)try{let a=new URL("__wasm__/webr-fetch-request/",g(this,Er)),s=new XMLHttpRequest;s.timeout=6e4,s.responseType="arraybuffer",s.open("POST",a,!1);let i={clientId:g(this,xr),uuid:t.data.uuid};return s.send((0,Mn.encode)(i)),(0,Mn.decode)(s.response)}catch(a){if(a instanceof DOMException&&n++<1e3)console.log("Service worker request failed - resending request");else throw a}}read(){return this.syncRequest({type:"read"}).data.resp}inputOrDispatch(){for(;;){let r=this.read();if(r.type==="stdin")return c.allocateUTF8(r.data);g(this,Tr).call(this,r)}}run(r){try{c.callMain(r)}catch(t){throw t instanceof WebAssembly.RuntimeError&&(this.writeSystem({type:"console.error",data:t.message}),this.writeSystem({type:"console.error",data:"An unrecoverable WebAssembly error has occurred, the webR worker will be closed."}),this.writeSystem({type:"close"})),t}}setInterrupt(r){P(this,Sr,r)}handleInterrupt(){Date.now()>g(this,vr)+1e3&&(P(this,vr,Date.now()),this.syncRequest({type:"interrupt"}).data.resp&&g(this,Sr).call(this))}setDispatchHandler(r){P(this,Tr,r)}};zt=new WeakMap,xr=new WeakMap,Er=new WeakMap,vr=new WeakMap,Tr=new WeakMap,Sr=new WeakMap;z&&(globalThis.Worker=require("worker_threads").Worker);var jt,Pn,ni,kr,Ma=class extends Be{constructor(t){super();x(this,Pn);this.close=()=>{};x(this,jt,void 0);x(this,kr,async(t,n)=>{if(!(!n||!n.type))switch(n.type){case"resolve":this.resolve();return;case"response":this.resolveResponse(n);return;case"system":this.systemQueue.put(n.data);return;default:this.outputQueue.put(n);return;case"request":{let a=n,s=a.data.msg;switch(s.type){case"read":{let i=await this.inputQueue.get();if(g(this,jt)){let o=lt(a.data.uuid,i);g(this,jt).postMessage(o)}break}default:throw new q(`Unsupported request type '${s.type}'.`)}return}case"sync-request":throw new q("Can't send messages of type 'sync-request' in PostMessage mode. Use 'request' instead.")}});({resolve:this.resolve,reject:this.reject,promise:this.initialised}=Ae());let n=a=>{P(this,jt,a),K(this,Pn,ni).call(this,a),this.close=()=>{a.terminate(),this.putClosedMessage()};let s={type:"init",data:{config:t,channelType:_e.PostMessage}};a.postMessage(s)};if(At(t.baseUrl))kt(`${t.baseUrl}webr-worker.js`,a=>n(a));else{let a=new Worker(`${t.baseUrl}webr-worker.js`);n(a)}}interrupt(){console.error("Interrupting R execution is not available when using the PostMessage channel")}};jt=new WeakMap,Pn=new WeakSet,ni=function(t){z?(t.on("message",n=>{g(this,kr).call(this,t,n)}),t.on("error",n=>{console.error(n),this.reject(new te("An error occurred initialising the webR PostMessageChannel worker."))})):(t.onmessage=n=>g(this,kr).call(this,t,n.data),t.onerror=n=>{console.error(n),this.reject(new te("An error occurred initialising the webR PostMessageChannel worker."))})},kr=new WeakMap;var qt,Ht,Ar,ft,In,On=class{constructor(){x(this,qt,void 0);x(this,Ht,new Map);x(this,Ar,()=>0);x(this,ft,0);x(this,In,async()=>{for(;;)try{P(this,ft,0);let r=await this.request({type:"read"});if(r.type==="stdin"){let t=Module.allocateUTF8(r.data);Module._strcpy(Module._DLLbuf,t),Module.setValue(Module._DLLbufp,Module._DLLbuf,"*"),Module._free(t);try{for(;Module._R_ReplDLLdo1()>0;);}catch(n){if(n instanceof WebAssembly.Exception)Module._R_ReplDLLinit(),Module._R_ReplDLLdo1();else throw n}}else g(this,Ar).call(this,r)}catch(r){if(r instanceof WebAssembly.RuntimeError&&(this.writeSystem({type:"console.error",data:r.message}),this.writeSystem({type:"console.error",data:"An unrecoverable WebAssembly error has occurred, the webR worker will be closed."}),this.writeSystem({type:"close"})),!(r instanceof WebAssembly.Exception))throw r}});P(this,qt,z?require("worker_threads").parentPort:globalThis)}resolve(){this.write({type:"resolve"})}write(r,t){g(this,qt).postMessage(r,t)}writeSystem(r,t){g(this,qt).postMessage({type:"system",data:r},t)}read(){throw new q("Unable to synchronously read when using the `PostMessage` channel.")}inputOrDispatch(){if(g(this,ft)>0){P(this,ft,0);let r=Module.allocateUTF8OnStack("Can't block for input when using the PostMessage communication channel.");Module._Rf_error(r)}return us(this,ft)._++,0}run(r){let t=r||[];t.unshift("R");let n=t.length,a=Module._malloc(4*(n+1));t.forEach((s,i)=>{let o=a+4*i,d=Module.allocateUTF8(s);Module.setValue(o,d,"*")}),this.writeSystem({type:"console.warn",data:"WebR is using `PostMessage` communication channel, nested R REPLs are not available."}),Module._Rf_initialize_R(n,a),Module._setup_Rmainloop(),Module._R_ReplDLLinit(),Module._R_ReplDLLdo1(),g(this,In).call(this)}setDispatchHandler(r){P(this,Ar,r)}async request(r,t){let n=It(r,t),{resolve:a,promise:s}=Ae();return g(this,Ht).set(n.data.uuid,a),this.write(n),s}setInterrupt(){}handleInterrupt(){}onMessageFromMainThread(r){let t=r,n=t.data.uuid,a=g(this,Ht).get(n);a?(g(this,Ht).delete(n),a(t.data.resp)):console.warn("Can't find request.")}};qt=new WeakMap,Ht=new WeakMap,Ar=new WeakMap,ft=new WeakMap,In=new WeakMap;var _e={Automatic:0,SharedArrayBuffer:1,ServiceWorker:2,PostMessage:3};function ai(e){switch(e.data.channelType){case _e.SharedArrayBuffer:return new vn;case _e.ServiceWorker:return new Sn(e.data);case _e.PostMessage:return new On;default:throw new q("Unknown worker channel type received")}}function Gt(e){let r=e.length;for(;--r>=0;)e[r]=0}var Hl=0,qi=1,$l=2,Zl=3,Vl=258,es=29,qr=256,Nr=qr+1+es,Vt=30,ts=19,Hi=2*Nr+1,ht=15,Oa=16,Jl=7,rs=256,$i=16,Zi=17,Vi=18,$a=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Fn=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Xl=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Ji=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Gl=512,Pe=new Array((Nr+2)*2);Gt(Pe);var Pr=new Array(Vt*2);Gt(Pr);var Wr=new Array(Gl);Gt(Wr);var Cr=new Array(Vl-Zl+1);Gt(Cr);var ns=new Array(es);Gt(ns);var Bn=new Array(Vt);Gt(Bn);function Pa(e,r,t,n,a){this.static_tree=e,this.extra_bits=r,this.extra_base=t,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}var Xi,Gi,Ki;function Ia(e,r){this.dyn_tree=e,this.max_code=0,this.stat_desc=r}var Yi=e=>e<256?Wr[e]:Wr[256+(e>>>7)],Lr=(e,r)=>{e.pending_buf[e.pending++]=r&255,e.pending_buf[e.pending++]=r>>>8&255},Q=(e,r,t)=>{e.bi_valid>Oa-t?(e.bi_buf|=r<<e.bi_valid&65535,Lr(e,e.bi_buf),e.bi_buf=r>>Oa-e.bi_valid,e.bi_valid+=t-Oa):(e.bi_buf|=r<<e.bi_valid&65535,e.bi_valid+=t)},Ee=(e,r,t)=>{Q(e,t[r*2],t[r*2+1])},Qi=(e,r)=>{let t=0;do t|=e&1,e>>>=1,t<<=1;while(--r>0);return t>>>1},Kl=e=>{e.bi_valid===16?(Lr(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},Yl=(e,r)=>{let t=r.dyn_tree,n=r.max_code,a=r.stat_desc.static_tree,s=r.stat_desc.has_stree,i=r.stat_desc.extra_bits,o=r.stat_desc.extra_base,d=r.stat_desc.max_length,l,u,w,_,f,m,S=0;for(_=0;_<=ht;_++)e.bl_count[_]=0;for(t[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<Hi;l++)u=e.heap[l],_=t[t[u*2+1]*2+1]+1,_>d&&(_=d,S++),t[u*2+1]=_,!(u>n)&&(e.bl_count[_]++,f=0,u>=o&&(f=i[u-o]),m=t[u*2],e.opt_len+=m*(_+f),s&&(e.static_len+=m*(a[u*2+1]+f)));if(S!==0){do{for(_=d-1;e.bl_count[_]===0;)_--;e.bl_count[_]--,e.bl_count[_+1]+=2,e.bl_count[d]--,S-=2}while(S>0);for(_=d;_!==0;_--)for(u=e.bl_count[_];u!==0;)w=e.heap[--l],!(w>n)&&(t[w*2+1]!==_&&(e.opt_len+=(_-t[w*2+1])*t[w*2],t[w*2+1]=_),u--)}},eo=(e,r,t)=>{let n=new Array(ht+1),a=0,s,i;for(s=1;s<=ht;s++)a=a+t[s-1]<<1,n[s]=a;for(i=0;i<=r;i++){let o=e[i*2+1];o!==0&&(e[i*2]=Qi(n[o]++,o))}},Ql=()=>{let e,r,t,n,a,s=new Array(ht+1);for(t=0,n=0;n<es-1;n++)for(ns[n]=t,e=0;e<1<<$a[n];e++)Cr[t++]=n;for(Cr[t-1]=n,a=0,n=0;n<16;n++)for(Bn[n]=a,e=0;e<1<<Fn[n];e++)Wr[a++]=n;for(a>>=7;n<Vt;n++)for(Bn[n]=a<<7,e=0;e<1<<Fn[n]-7;e++)Wr[256+a++]=n;for(r=0;r<=ht;r++)s[r]=0;for(e=0;e<=143;)Pe[e*2+1]=8,e++,s[8]++;for(;e<=255;)Pe[e*2+1]=9,e++,s[9]++;for(;e<=279;)Pe[e*2+1]=7,e++,s[7]++;for(;e<=287;)Pe[e*2+1]=8,e++,s[8]++;for(eo(Pe,Nr+1,s),e=0;e<Vt;e++)Pr[e*2+1]=5,Pr[e*2]=Qi(e,5);Xi=new Pa(Pe,$a,qr+1,Nr,ht),Gi=new Pa(Pr,Fn,0,Vt,ht),Ki=new Pa(new Array(0),Xl,0,ts,Jl)},to=e=>{let r;for(r=0;r<Nr;r++)e.dyn_ltree[r*2]=0;for(r=0;r<Vt;r++)e.dyn_dtree[r*2]=0;for(r=0;r<ts;r++)e.bl_tree[r*2]=0;e.dyn_ltree[rs*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},ro=e=>{e.bi_valid>8?Lr(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},si=(e,r,t,n)=>{let a=r*2,s=t*2;return e[a]<e[s]||e[a]===e[s]&&n[r]<=n[t]},Ua=(e,r,t)=>{let n=e.heap[t],a=t<<1;for(;a<=e.heap_len&&(a<e.heap_len&&si(r,e.heap[a+1],e.heap[a],e.depth)&&a++,!si(r,n,e.heap[a],e.depth));)e.heap[t]=e.heap[a],t=a,a<<=1;e.heap[t]=n},ii=(e,r,t)=>{let n,a,s=0,i,o;if(e.sym_next!==0)do n=e.pending_buf[e.sym_buf+s++]&255,n+=(e.pending_buf[e.sym_buf+s++]&255)<<8,a=e.pending_buf[e.sym_buf+s++],n===0?Ee(e,a,r):(i=Cr[a],Ee(e,i+qr+1,r),o=$a[i],o!==0&&(a-=ns[i],Q(e,a,o)),n--,i=Yi(n),Ee(e,i,t),o=Fn[i],o!==0&&(n-=Bn[i],Q(e,n,o)));while(s<e.sym_next);Ee(e,rs,r)},Za=(e,r)=>{let t=r.dyn_tree,n=r.stat_desc.static_tree,a=r.stat_desc.has_stree,s=r.stat_desc.elems,i,o,d=-1,l;for(e.heap_len=0,e.heap_max=Hi,i=0;i<s;i++)t[i*2]!==0?(e.heap[++e.heap_len]=d=i,e.depth[i]=0):t[i*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=d<2?++d:0,t[l*2]=1,e.depth[l]=0,e.opt_len--,a&&(e.static_len-=n[l*2+1]);for(r.max_code=d,i=e.heap_len>>1;i>=1;i--)Ua(e,t,i);l=s;do i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Ua(e,t,1),o=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=o,t[l*2]=t[i*2]+t[o*2],e.depth[l]=(e.depth[i]>=e.depth[o]?e.depth[i]:e.depth[o])+1,t[i*2+1]=t[o*2+1]=l,e.heap[1]=l++,Ua(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],Yl(e,r),eo(t,d,e.bl_count)},oi=(e,r,t)=>{let n,a=-1,s,i=r[0*2+1],o=0,d=7,l=4;for(i===0&&(d=138,l=3),r[(t+1)*2+1]=65535,n=0;n<=t;n++)s=i,i=r[(n+1)*2+1],!(++o<d&&s===i)&&(o<l?e.bl_tree[s*2]+=o:s!==0?(s!==a&&e.bl_tree[s*2]++,e.bl_tree[$i*2]++):o<=10?e.bl_tree[Zi*2]++:e.bl_tree[Vi*2]++,o=0,a=s,i===0?(d=138,l=3):s===i?(d=6,l=3):(d=7,l=4))},li=(e,r,t)=>{let n,a=-1,s,i=r[0*2+1],o=0,d=7,l=4;for(i===0&&(d=138,l=3),n=0;n<=t;n++)if(s=i,i=r[(n+1)*2+1],!(++o<d&&s===i)){if(o<l)do Ee(e,s,e.bl_tree);while(--o!==0);else s!==0?(s!==a&&(Ee(e,s,e.bl_tree),o--),Ee(e,$i,e.bl_tree),Q(e,o-3,2)):o<=10?(Ee(e,Zi,e.bl_tree),Q(e,o-3,3)):(Ee(e,Vi,e.bl_tree),Q(e,o-11,7));o=0,a=s,i===0?(d=138,l=3):s===i?(d=6,l=3):(d=7,l=4)}},ec=e=>{let r;for(oi(e,e.dyn_ltree,e.l_desc.max_code),oi(e,e.dyn_dtree,e.d_desc.max_code),Za(e,e.bl_desc),r=ts-1;r>=3&&e.bl_tree[Ji[r]*2+1]===0;r--);return e.opt_len+=3*(r+1)+5+5+4,r},tc=(e,r,t,n)=>{let a;for(Q(e,r-257,5),Q(e,t-1,5),Q(e,n-4,4),a=0;a<n;a++)Q(e,e.bl_tree[Ji[a]*2+1],3);li(e,e.dyn_ltree,r-1),li(e,e.dyn_dtree,t-1)},rc=e=>{let r=4093624447,t;for(t=0;t<=31;t++,r>>>=1)if(r&1&&e.dyn_ltree[t*2]!==0)return 0;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return 1;for(t=32;t<qr;t++)if(e.dyn_ltree[t*2]!==0)return 1;return 0},ci=!1,nc=e=>{ci||(Ql(),ci=!0),e.l_desc=new Ia(e.dyn_ltree,Xi),e.d_desc=new Ia(e.dyn_dtree,Gi),e.bl_desc=new Ia(e.bl_tree,Ki),e.bi_buf=0,e.bi_valid=0,to(e)},no=(e,r,t,n)=>{Q(e,(Hl<<1)+(n?1:0),3),ro(e),Lr(e,t),Lr(e,~t),t&&e.pending_buf.set(e.window.subarray(r,r+t),e.pending),e.pending+=t},ac=e=>{Q(e,qi<<1,3),Ee(e,rs,Pe),Kl(e)},sc=(e,r,t,n)=>{let a,s,i=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=rc(e)),Za(e,e.l_desc),Za(e,e.d_desc),i=ec(e),a=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=a&&(a=s)):a=s=t+5,t+4<=a&&r!==-1?no(e,r,t,n):e.strategy===4||s===a?(Q(e,(qi<<1)+(n?1:0),3),ii(e,Pe,Pr)):(Q(e,($l<<1)+(n?1:0),3),tc(e,e.l_desc.max_code+1,e.d_desc.max_code+1,i+1),ii(e,e.dyn_ltree,e.dyn_dtree)),to(e),n&&ro(e)},ic=(e,r,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=r,e.pending_buf[e.sym_buf+e.sym_next++]=r>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,r===0?e.dyn_ltree[t*2]++:(e.matches++,r--,e.dyn_ltree[(Cr[t]+qr+1)*2]++,e.dyn_dtree[Yi(r)*2]++),e.sym_next===e.sym_end),oc=nc,lc=no,cc=sc,uc=ic,dc=ac,fc={_tr_init:oc,_tr_stored_block:lc,_tr_flush_block:cc,_tr_tally:uc,_tr_align:dc},hc=(e,r,t,n)=>{let a=e&65535|0,s=e>>>16&65535|0,i=0;for(;t!==0;){i=t>2e3?2e3:t,t-=i;do a=a+r[n++]|0,s=s+a|0;while(--i);a%=65521,s%=65521}return a|s<<16|0},Fr=hc,pc=()=>{let e,r=[];for(var t=0;t<256;t++){e=t;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;r[t]=e}return r},_c=new Uint32Array(pc()),gc=(e,r,t,n)=>{let a=_c,s=n+t;e^=-1;for(let i=n;i<s;i++)e=e>>>8^a[(e^r[i])&255];return e^-1},$=gc,gt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Kt={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:mc,_tr_stored_block:Va,_tr_flush_block:yc,_tr_tally:qe,_tr_align:bc}=fc,{Z_NO_FLUSH:He,Z_PARTIAL_FLUSH:wc,Z_FULL_FLUSH:Rc,Z_FINISH:fe,Z_BLOCK:ui,Z_OK:X,Z_STREAM_END:di,Z_STREAM_ERROR:ve,Z_DATA_ERROR:xc,Z_BUF_ERROR:Na,Z_DEFAULT_COMPRESSION:Ec,Z_FILTERED:vc,Z_HUFFMAN_ONLY:Un,Z_RLE:Tc,Z_FIXED:Sc,Z_DEFAULT_STRATEGY:kc,Z_UNKNOWN:Ac,Z_DEFLATED:qn}=Kt,Dc=9,Mc=15,Oc=8,Pc=29,Ic=256,Ja=Ic+1+Pc,Uc=30,Nc=19,Wc=2*Ja+1,Cc=15,U=3,je=258,Te=je+U+1,Lc=32,Jt=42,as=57,Xa=69,Ga=73,Ka=91,Ya=103,pt=113,Mr=666,Y=1,Yt=2,mt=3,Qt=4,Fc=3,_t=(e,r)=>(e.msg=gt[r],r),fi=e=>e*2-(e>4?9:0),ze=e=>{let r=e.length;for(;--r>=0;)e[r]=0},Bc=e=>{let r,t,n,a=e.w_size;r=e.hash_size,n=r;do t=e.head[--n],e.head[n]=t>=a?t-a:0;while(--r);r=a,n=r;do t=e.prev[--n],e.prev[n]=t>=a?t-a:0;while(--r)},zc=(e,r,t)=>(r<<e.hash_shift^t)&e.hash_mask,$e=zc,ne=e=>{let r=e.state,t=r.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(r.pending_buf.subarray(r.pending_out,r.pending_out+t),e.next_out),e.next_out+=t,r.pending_out+=t,e.total_out+=t,e.avail_out-=t,r.pending-=t,r.pending===0&&(r.pending_out=0))},ae=(e,r)=>{yc(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,r),e.block_start=e.strstart,ne(e.strm)},W=(e,r)=>{e.pending_buf[e.pending++]=r},Dr=(e,r)=>{e.pending_buf[e.pending++]=r>>>8&255,e.pending_buf[e.pending++]=r&255},Qa=(e,r,t,n)=>{let a=e.avail_in;return a>n&&(a=n),a===0?0:(e.avail_in-=a,r.set(e.input.subarray(e.next_in,e.next_in+a),t),e.state.wrap===1?e.adler=Fr(e.adler,r,a,t):e.state.wrap===2&&(e.adler=$(e.adler,r,a,t)),e.next_in+=a,e.total_in+=a,a)},ao=(e,r)=>{let t=e.max_chain_length,n=e.strstart,a,s,i=e.prev_length,o=e.nice_match,d=e.strstart>e.w_size-Te?e.strstart-(e.w_size-Te):0,l=e.window,u=e.w_mask,w=e.prev,_=e.strstart+je,f=l[n+i-1],m=l[n+i];e.prev_length>=e.good_match&&(t>>=2),o>e.lookahead&&(o=e.lookahead);do if(a=r,!(l[a+i]!==m||l[a+i-1]!==f||l[a]!==l[n]||l[++a]!==l[n+1])){n+=2,a++;do;while(l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&n<_);if(s=je-(_-n),n=_-je,s>i){if(e.match_start=r,i=s,s>=o)break;f=l[n+i-1],m=l[n+i]}}while((r=w[r&u])>d&&--t!==0);return i<=e.lookahead?i:e.lookahead},Xt=e=>{let r=e.w_size,t,n,a;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=r+(r-Te)&&(e.window.set(e.window.subarray(r,r+r-n),0),e.match_start-=r,e.strstart-=r,e.block_start-=r,e.insert>e.strstart&&(e.insert=e.strstart),Bc(e),n+=r),e.strm.avail_in===0)break;if(t=Qa(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=U)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=$e(e,e.ins_h,e.window[a+1]);e.insert&&(e.ins_h=$e(e,e.ins_h,e.window[a+U-1]),e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<U)););}while(e.lookahead<Te&&e.strm.avail_in!==0)},so=(e,r)=>{let t=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,a,s,i=0,o=e.strm.avail_in;do{if(n=65535,s=e.bi_valid+42>>3,e.strm.avail_out<s||(s=e.strm.avail_out-s,a=e.strstart-e.block_start,n>a+e.strm.avail_in&&(n=a+e.strm.avail_in),n>s&&(n=s),n<t&&(n===0&&r!==fe||r===He||n!==a+e.strm.avail_in)))break;i=r===fe&&n===a+e.strm.avail_in?1:0,Va(e,0,0,i),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,ne(e.strm),a&&(a>n&&(a=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,n-=a),n&&(Qa(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(i===0);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),i?Qt:r!==He&&r!==fe&&e.strm.avail_in===0&&e.strstart===e.block_start?Yt:(s=e.window_size-e.strstart,e.strm.avail_in>s&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,s+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),s>e.strm.avail_in&&(s=e.strm.avail_in),s&&(Qa(e.strm,e.window,e.strstart,s),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.high_water<e.strstart&&(e.high_water=e.strstart),s=e.bi_valid+42>>3,s=e.pending_buf_size-s>65535?65535:e.pending_buf_size-s,t=s>e.w_size?e.w_size:s,a=e.strstart-e.block_start,(a>=t||(a||r===fe)&&r!==He&&e.strm.avail_in===0&&a<=s)&&(n=a>s?s:a,i=r===fe&&e.strm.avail_in===0&&n===a?1:0,Va(e,e.block_start,n,i),e.block_start+=n,ne(e.strm)),i?mt:Y)},Wa=(e,r)=>{let t,n;for(;;){if(e.lookahead<Te){if(Xt(e),e.lookahead<Te&&r===He)return Y;if(e.lookahead===0)break}if(t=0,e.lookahead>=U&&(e.ins_h=$e(e,e.ins_h,e.window[e.strstart+U-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-Te&&(e.match_length=ao(e,t)),e.match_length>=U)if(n=qe(e,e.strstart-e.match_start,e.match_length-U),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=U){e.match_length--;do e.strstart++,e.ins_h=$e(e,e.ins_h,e.window[e.strstart+U-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=$e(e,e.ins_h,e.window[e.strstart+1]);else n=qe(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(ae(e,!1),e.strm.avail_out===0))return Y}return e.insert=e.strstart<U-1?e.strstart:U-1,r===fe?(ae(e,!0),e.strm.avail_out===0?mt:Qt):e.sym_next&&(ae(e,!1),e.strm.avail_out===0)?Y:Yt},$t=(e,r)=>{let t,n,a;for(;;){if(e.lookahead<Te){if(Xt(e),e.lookahead<Te&&r===He)return Y;if(e.lookahead===0)break}if(t=0,e.lookahead>=U&&(e.ins_h=$e(e,e.ins_h,e.window[e.strstart+U-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=U-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-Te&&(e.match_length=ao(e,t),e.match_length<=5&&(e.strategy===vc||e.match_length===U&&e.strstart-e.match_start>4096)&&(e.match_length=U-1)),e.prev_length>=U&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-U,n=qe(e,e.strstart-1-e.prev_match,e.prev_length-U),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=$e(e,e.ins_h,e.window[e.strstart+U-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=U-1,e.strstart++,n&&(ae(e,!1),e.strm.avail_out===0))return Y}else if(e.match_available){if(n=qe(e,0,e.window[e.strstart-1]),n&&ae(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Y}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=qe(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<U-1?e.strstart:U-1,r===fe?(ae(e,!0),e.strm.avail_out===0?mt:Qt):e.sym_next&&(ae(e,!1),e.strm.avail_out===0)?Y:Yt},jc=(e,r)=>{let t,n,a,s,i=e.window;for(;;){if(e.lookahead<=je){if(Xt(e),e.lookahead<=je&&r===He)return Y;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=U&&e.strstart>0&&(a=e.strstart-1,n=i[a],n===i[++a]&&n===i[++a]&&n===i[++a])){s=e.strstart+je;do;while(n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&a<s);e.match_length=je-(s-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=U?(t=qe(e,1,e.match_length-U),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=qe(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(ae(e,!1),e.strm.avail_out===0))return Y}return e.insert=0,r===fe?(ae(e,!0),e.strm.avail_out===0?mt:Qt):e.sym_next&&(ae(e,!1),e.strm.avail_out===0)?Y:Yt},qc=(e,r)=>{let t;for(;;){if(e.lookahead===0&&(Xt(e),e.lookahead===0)){if(r===He)return Y;break}if(e.match_length=0,t=qe(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(ae(e,!1),e.strm.avail_out===0))return Y}return e.insert=0,r===fe?(ae(e,!0),e.strm.avail_out===0?mt:Qt):e.sym_next&&(ae(e,!1),e.strm.avail_out===0)?Y:Yt};function xe(e,r,t,n,a){this.good_length=e,this.max_lazy=r,this.nice_length=t,this.max_chain=n,this.func=a}var Or=[new xe(0,0,0,0,so),new xe(4,4,8,4,Wa),new xe(4,5,16,8,Wa),new xe(4,6,32,32,Wa),new xe(4,4,16,16,$t),new xe(8,16,32,32,$t),new xe(8,16,128,128,$t),new xe(8,32,128,256,$t),new xe(32,128,258,1024,$t),new xe(32,258,258,4096,$t)],Hc=e=>{e.window_size=2*e.w_size,ze(e.head),e.max_lazy_match=Or[e.level].max_lazy,e.good_match=Or[e.level].good_length,e.nice_match=Or[e.level].nice_length,e.max_chain_length=Or[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=U-1,e.match_available=0,e.ins_h=0};function $c(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=qn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Wc*2),this.dyn_dtree=new Uint16Array((2*Uc+1)*2),this.bl_tree=new Uint16Array((2*Nc+1)*2),ze(this.dyn_ltree),ze(this.dyn_dtree),ze(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Cc+1),this.heap=new Uint16Array(2*Ja+1),ze(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Ja+1),ze(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Hr=e=>{if(!e)return 1;let r=e.state;return!r||r.strm!==e||r.status!==Jt&&r.status!==as&&r.status!==Xa&&r.status!==Ga&&r.status!==Ka&&r.status!==Ya&&r.status!==pt&&r.status!==Mr?1:0},io=e=>{if(Hr(e))return _t(e,ve);e.total_in=e.total_out=0,e.data_type=Ac;let r=e.state;return r.pending=0,r.pending_out=0,r.wrap<0&&(r.wrap=-r.wrap),r.status=r.wrap===2?as:r.wrap?Jt:pt,e.adler=r.wrap===2?0:1,r.last_flush=-2,mc(r),X},oo=e=>{let r=io(e);return r===X&&Hc(e.state),r},Zc=(e,r)=>Hr(e)||e.state.wrap!==2?ve:(e.state.gzhead=r,X),lo=(e,r,t,n,a,s)=>{if(!e)return ve;let i=1;if(r===Ec&&(r=6),n<0?(i=0,n=-n):n>15&&(i=2,n-=16),a<1||a>Dc||t!==qn||n<8||n>15||r<0||r>9||s<0||s>Sc||n===8&&i!==1)return _t(e,ve);n===8&&(n=9);let o=new $c;return e.state=o,o.strm=e,o.status=Jt,o.wrap=i,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=a+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+U-1)/U),o.window=new Uint8Array(o.w_size*2),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<a+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=r,o.strategy=s,o.method=t,oo(e)},Vc=(e,r)=>lo(e,r,qn,Mc,Oc,kc),Jc=(e,r)=>{if(Hr(e)||r>ui||r<0)return e?_t(e,ve):ve;let t=e.state;if(!e.output||e.avail_in!==0&&!e.input||t.status===Mr&&r!==fe)return _t(e,e.avail_out===0?Na:ve);let n=t.last_flush;if(t.last_flush=r,t.pending!==0){if(ne(e),e.avail_out===0)return t.last_flush=-1,X}else if(e.avail_in===0&&fi(r)<=fi(n)&&r!==fe)return _t(e,Na);if(t.status===Mr&&e.avail_in!==0)return _t(e,Na);if(t.status===Jt&&t.wrap===0&&(t.status=pt),t.status===Jt){let a=qn+(t.w_bits-8<<4)<<8,s=-1;if(t.strategy>=Un||t.level<2?s=0:t.level<6?s=1:t.level===6?s=2:s=3,a|=s<<6,t.strstart!==0&&(a|=Lc),a+=31-a%31,Dr(t,a),t.strstart!==0&&(Dr(t,e.adler>>>16),Dr(t,e.adler&65535)),e.adler=1,t.status=pt,ne(e),t.pending!==0)return t.last_flush=-1,X}if(t.status===as){if(e.adler=0,W(t,31),W(t,139),W(t,8),t.gzhead)W(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),W(t,t.gzhead.time&255),W(t,t.gzhead.time>>8&255),W(t,t.gzhead.time>>16&255),W(t,t.gzhead.time>>24&255),W(t,t.level===9?2:t.strategy>=Un||t.level<2?4:0),W(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(W(t,t.gzhead.extra.length&255),W(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=$(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=Xa;else if(W(t,0),W(t,0),W(t,0),W(t,0),W(t,0),W(t,t.level===9?2:t.strategy>=Un||t.level<2?4:0),W(t,Fc),t.status=pt,ne(e),t.pending!==0)return t.last_flush=-1,X}if(t.status===Xa){if(t.gzhead.extra){let a=t.pending,s=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+s>t.pending_buf_size;){let o=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>a&&(e.adler=$(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex+=o,ne(e),t.pending!==0)return t.last_flush=-1,X;a=0,s-=o}let i=new Uint8Array(t.gzhead.extra);t.pending_buf.set(i.subarray(t.gzindex,t.gzindex+s),t.pending),t.pending+=s,t.gzhead.hcrc&&t.pending>a&&(e.adler=$(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=Ga}if(t.status===Ga){if(t.gzhead.name){let a=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=$(e.adler,t.pending_buf,t.pending-a,a)),ne(e),t.pending!==0)return t.last_flush=-1,X;a=0}t.gzindex<t.gzhead.name.length?s=t.gzhead.name.charCodeAt(t.gzindex++)&255:s=0,W(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>a&&(e.adler=$(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=Ka}if(t.status===Ka){if(t.gzhead.comment){let a=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=$(e.adler,t.pending_buf,t.pending-a,a)),ne(e),t.pending!==0)return t.last_flush=-1,X;a=0}t.gzindex<t.gzhead.comment.length?s=t.gzhead.comment.charCodeAt(t.gzindex++)&255:s=0,W(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>a&&(e.adler=$(e.adler,t.pending_buf,t.pending-a,a))}t.status=Ya}if(t.status===Ya){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(ne(e),t.pending!==0))return t.last_flush=-1,X;W(t,e.adler&255),W(t,e.adler>>8&255),e.adler=0}if(t.status=pt,ne(e),t.pending!==0)return t.last_flush=-1,X}if(e.avail_in!==0||t.lookahead!==0||r!==He&&t.status!==Mr){let a=t.level===0?so(t,r):t.strategy===Un?qc(t,r):t.strategy===Tc?jc(t,r):Or[t.level].func(t,r);if((a===mt||a===Qt)&&(t.status=Mr),a===Y||a===mt)return e.avail_out===0&&(t.last_flush=-1),X;if(a===Yt&&(r===wc?bc(t):r!==ui&&(Va(t,0,0,!1),r===Rc&&(ze(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),ne(e),e.avail_out===0))return t.last_flush=-1,X}return r!==fe?X:t.wrap<=0?di:(t.wrap===2?(W(t,e.adler&255),W(t,e.adler>>8&255),W(t,e.adler>>16&255),W(t,e.adler>>24&255),W(t,e.total_in&255),W(t,e.total_in>>8&255),W(t,e.total_in>>16&255),W(t,e.total_in>>24&255)):(Dr(t,e.adler>>>16),Dr(t,e.adler&65535)),ne(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?X:di)},Xc=e=>{if(Hr(e))return ve;let r=e.state.status;return e.state=null,r===pt?_t(e,xc):X},Gc=(e,r)=>{let t=r.length;if(Hr(e))return ve;let n=e.state,a=n.wrap;if(a===2||a===1&&n.status!==Jt||n.lookahead)return ve;if(a===1&&(e.adler=Fr(e.adler,r,t,0)),n.wrap=0,t>=n.w_size){a===0&&(ze(n.head),n.strstart=0,n.block_start=0,n.insert=0);let d=new Uint8Array(n.w_size);d.set(r.subarray(t-n.w_size,t),0),r=d,t=n.w_size}let s=e.avail_in,i=e.next_in,o=e.input;for(e.avail_in=t,e.next_in=0,e.input=r,Xt(n);n.lookahead>=U;){let d=n.strstart,l=n.lookahead-(U-1);do n.ins_h=$e(n,n.ins_h,n.window[d+U-1]),n.prev[d&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=d,d++;while(--l);n.strstart=d,n.lookahead=U-1,Xt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=U-1,n.match_available=0,e.next_in=i,e.input=o,e.avail_in=s,n.wrap=a,X},Kc=Vc,Yc=lo,Qc=oo,eu=io,tu=Zc,ru=Jc,nu=Xc,au=Gc,su="pako deflate (from Nodeca project)",Ir={deflateInit:Kc,deflateInit2:Yc,deflateReset:Qc,deflateResetKeep:eu,deflateSetHeader:tu,deflate:ru,deflateEnd:nu,deflateSetDictionary:au,deflateInfo:su},iu=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),ou=function(e){let r=Array.prototype.slice.call(arguments,1);for(;r.length;){let t=r.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let n in t)iu(t,n)&&(e[n]=t[n])}}return e},lu=e=>{let r=0;for(let n=0,a=e.length;n<a;n++)r+=e[n].length;let t=new Uint8Array(r);for(let n=0,a=0,s=e.length;n<s;n++){let i=e[n];t.set(i,a),a+=i.length}return t},Hn={assign:ou,flattenChunks:lu},co=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{co=!1}var Br=new Uint8Array(256);for(let e=0;e<256;e++)Br[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Br[254]=Br[254]=1;var cu=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let r,t,n,a,s,i=e.length,o=0;for(a=0;a<i;a++)t=e.charCodeAt(a),(t&64512)===55296&&a+1<i&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),a++)),o+=t<128?1:t<2048?2:t<65536?3:4;for(r=new Uint8Array(o),s=0,a=0;s<o;a++)t=e.charCodeAt(a),(t&64512)===55296&&a+1<i&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),a++)),t<128?r[s++]=t:t<2048?(r[s++]=192|t>>>6,r[s++]=128|t&63):t<65536?(r[s++]=224|t>>>12,r[s++]=128|t>>>6&63,r[s++]=128|t&63):(r[s++]=240|t>>>18,r[s++]=128|t>>>12&63,r[s++]=128|t>>>6&63,r[s++]=128|t&63);return r},uu=(e,r)=>{if(r<65534&&e.subarray&&co)return String.fromCharCode.apply(null,e.length===r?e:e.subarray(0,r));let t="";for(let n=0;n<r;n++)t+=String.fromCharCode(e[n]);return t},du=(e,r)=>{let t=r||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,r));let n,a,s=new Array(t*2);for(a=0,n=0;n<t;){let i=e[n++];if(i<128){s[a++]=i;continue}let o=Br[i];if(o>4){s[a++]=65533,n+=o-1;continue}for(i&=o===2?31:o===3?15:7;o>1&&n<t;)i=i<<6|e[n++]&63,o--;if(o>1){s[a++]=65533;continue}i<65536?s[a++]=i:(i-=65536,s[a++]=55296|i>>10&1023,s[a++]=56320|i&1023)}return uu(s,a)},fu=(e,r)=>{r=r||e.length,r>e.length&&(r=e.length);let t=r-1;for(;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?r:t+Br[e[t]]>r?t:r},zr={string2buf:cu,buf2string:du,utf8border:fu};function hu(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var uo=hu,fo=Object.prototype.toString,{Z_NO_FLUSH:pu,Z_SYNC_FLUSH:_u,Z_FULL_FLUSH:gu,Z_FINISH:mu,Z_OK:zn,Z_STREAM_END:yu,Z_DEFAULT_COMPRESSION:bu,Z_DEFAULT_STRATEGY:wu,Z_DEFLATED:Ru}=Kt;function $r(e){this.options=Hn.assign({level:bu,method:Ru,chunkSize:16384,windowBits:15,memLevel:8,strategy:wu},e||{});let r=this.options;r.raw&&r.windowBits>0?r.windowBits=-r.windowBits:r.gzip&&r.windowBits>0&&r.windowBits<16&&(r.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new uo,this.strm.avail_out=0;let t=Ir.deflateInit2(this.strm,r.level,r.method,r.windowBits,r.memLevel,r.strategy);if(t!==zn)throw new Error(gt[t]);if(r.header&&Ir.deflateSetHeader(this.strm,r.header),r.dictionary){let n;if(typeof r.dictionary=="string"?n=zr.string2buf(r.dictionary):fo.call(r.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(r.dictionary):n=r.dictionary,t=Ir.deflateSetDictionary(this.strm,n),t!==zn)throw new Error(gt[t]);this._dict_set=!0}}$r.prototype.push=function(e,r){let t=this.strm,n=this.options.chunkSize,a,s;if(this.ended)return!1;for(r===~~r?s=r:s=r===!0?mu:pu,typeof e=="string"?t.input=zr.string2buf(e):fo.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),(s===_u||s===gu)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(a=Ir.deflate(t,s),a===yu)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),a=Ir.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===zn;if(t.avail_out===0){this.onData(t.output);continue}if(s>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};$r.prototype.onData=function(e){this.chunks.push(e)};$r.prototype.onEnd=function(e){e===zn&&(this.result=Hn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function ss(e,r){let t=new $r(r);if(t.push(e,!0),t.err)throw t.msg||gt[t.err];return t.result}function xu(e,r){return r=r||{},r.raw=!0,ss(e,r)}function Eu(e,r){return r=r||{},r.gzip=!0,ss(e,r)}var vu=$r,Tu=ss,Su=xu,ku=Eu,Au=Kt,Du={Deflate:vu,deflate:Tu,deflateRaw:Su,gzip:ku,constants:Au},Nn=16209,Mu=16191,Ou=function(r,t){let n,a,s,i,o,d,l,u,w,_,f,m,S,E,R,k,p,h,A,C,b,N,O,T,M=r.state;n=r.next_in,O=r.input,a=n+(r.avail_in-5),s=r.next_out,T=r.output,i=s-(t-r.avail_out),o=s+(r.avail_out-257),d=M.dmax,l=M.wsize,u=M.whave,w=M.wnext,_=M.window,f=M.hold,m=M.bits,S=M.lencode,E=M.distcode,R=(1<<M.lenbits)-1,k=(1<<M.distbits)-1;e:do{m<15&&(f+=O[n++]<<m,m+=8,f+=O[n++]<<m,m+=8),p=S[f&R];t:for(;;){if(h=p>>>24,f>>>=h,m-=h,h=p>>>16&255,h===0)T[s++]=p&65535;else if(h&16){A=p&65535,h&=15,h&&(m<h&&(f+=O[n++]<<m,m+=8),A+=f&(1<<h)-1,f>>>=h,m-=h),m<15&&(f+=O[n++]<<m,m+=8,f+=O[n++]<<m,m+=8),p=E[f&k];r:for(;;){if(h=p>>>24,f>>>=h,m-=h,h=p>>>16&255,h&16){if(C=p&65535,h&=15,m<h&&(f+=O[n++]<<m,m+=8,m<h&&(f+=O[n++]<<m,m+=8)),C+=f&(1<<h)-1,C>d){r.msg="invalid distance too far back",M.mode=Nn;break e}if(f>>>=h,m-=h,h=s-i,C>h){if(h=C-h,h>u&&M.sane){r.msg="invalid distance too far back",M.mode=Nn;break e}if(b=0,N=_,w===0){if(b+=l-h,h<A){A-=h;do T[s++]=_[b++];while(--h);b=s-C,N=T}}else if(w<h){if(b+=l+w-h,h-=w,h<A){A-=h;do T[s++]=_[b++];while(--h);if(b=0,w<A){h=w,A-=h;do T[s++]=_[b++];while(--h);b=s-C,N=T}}}else if(b+=w-h,h<A){A-=h;do T[s++]=_[b++];while(--h);b=s-C,N=T}for(;A>2;)T[s++]=N[b++],T[s++]=N[b++],T[s++]=N[b++],A-=3;A&&(T[s++]=N[b++],A>1&&(T[s++]=N[b++]))}else{b=s-C;do T[s++]=T[b++],T[s++]=T[b++],T[s++]=T[b++],A-=3;while(A>2);A&&(T[s++]=T[b++],A>1&&(T[s++]=T[b++]))}}else if(h&64){r.msg="invalid distance code",M.mode=Nn;break e}else{p=E[(p&65535)+(f&(1<<h)-1)];continue r}break}}else if(h&64)if(h&32){M.mode=Mu;break e}else{r.msg="invalid literal/length code",M.mode=Nn;break e}else{p=S[(p&65535)+(f&(1<<h)-1)];continue t}break}}while(n<a&&s<o);A=m>>3,n-=A,m-=A<<3,f&=(1<<m)-1,r.next_in=n,r.next_out=s,r.avail_in=n<a?5+(a-n):5-(n-a),r.avail_out=s<o?257+(o-s):257-(s-o),M.hold=f,M.bits=m},Zt=15,hi=852,pi=592,_i=0,Ca=1,gi=2,Pu=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Iu=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),Uu=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),Nu=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),Wu=(e,r,t,n,a,s,i,o)=>{let d=o.bits,l=0,u=0,w=0,_=0,f=0,m=0,S=0,E=0,R=0,k=0,p,h,A,C,b,N=null,O,T=new Uint16Array(Zt+1),M=new Uint16Array(Zt+1),Z=null,tr,Ze,Ve;for(l=0;l<=Zt;l++)T[l]=0;for(u=0;u<n;u++)T[r[t+u]]++;for(f=d,_=Zt;_>=1&&T[_]===0;_--);if(f>_&&(f=_),_===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,o.bits=1,0;for(w=1;w<_&&T[w]===0;w++);for(f<w&&(f=w),E=1,l=1;l<=Zt;l++)if(E<<=1,E-=T[l],E<0)return-1;if(E>0&&(e===_i||_!==1))return-1;for(M[1]=0,l=1;l<Zt;l++)M[l+1]=M[l]+T[l];for(u=0;u<n;u++)r[t+u]!==0&&(i[M[r[t+u]]++]=u);if(e===_i?(N=Z=i,O=20):e===Ca?(N=Pu,Z=Iu,O=257):(N=Uu,Z=Nu,O=0),k=0,u=0,l=w,b=s,m=f,S=0,A=-1,R=1<<f,C=R-1,e===Ca&&R>hi||e===gi&&R>pi)return 1;for(;;){tr=l-S,i[u]+1<O?(Ze=0,Ve=i[u]):i[u]>=O?(Ze=Z[i[u]-O],Ve=N[i[u]-O]):(Ze=32+64,Ve=0),p=1<<l-S,h=1<<m,w=h;do h-=p,a[b+(k>>S)+h]=tr<<24|Ze<<16|Ve|0;while(h!==0);for(p=1<<l-1;k&p;)p>>=1;if(p!==0?(k&=p-1,k+=p):k=0,u++,--T[l]===0){if(l===_)break;l=r[t+i[u]]}if(l>f&&(k&C)!==A){for(S===0&&(S=f),b+=w,m=l-S,E=1<<m;m+S<_&&(E-=T[m+S],!(E<=0));)m++,E<<=1;if(R+=1<<m,e===Ca&&R>hi||e===gi&&R>pi)return 1;A=k&C,a[A]=f<<24|m<<16|b-s|0}}return k!==0&&(a[b+k]=l-S<<24|64<<16|0),o.bits=f,0},Ur=Wu,Cu=0,ho=1,po=2,{Z_FINISH:mi,Z_BLOCK:Lu,Z_TREES:Wn,Z_OK:yt,Z_STREAM_END:Fu,Z_NEED_DICT:Bu,Z_STREAM_ERROR:he,Z_DATA_ERROR:_o,Z_MEM_ERROR:go,Z_BUF_ERROR:zu,Z_DEFLATED:yi}=Kt,$n=16180,bi=16181,wi=16182,Ri=16183,xi=16184,Ei=16185,vi=16186,Ti=16187,Si=16188,ki=16189,jn=16190,Oe=16191,La=16192,Ai=16193,Fa=16194,Di=16195,Mi=16196,Oi=16197,Pi=16198,Cn=16199,Ln=16200,Ii=16201,Ui=16202,Ni=16203,Wi=16204,Ci=16205,Ba=16206,Li=16207,Fi=16208,B=16209,mo=16210,yo=16211,ju=852,qu=592,Hu=15,$u=Hu,Bi=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function Zu(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var bt=e=>{if(!e)return 1;let r=e.state;return!r||r.strm!==e||r.mode<$n||r.mode>yo?1:0},bo=e=>{if(bt(e))return he;let r=e.state;return e.total_in=e.total_out=r.total=0,e.msg="",r.wrap&&(e.adler=r.wrap&1),r.mode=$n,r.last=0,r.havedict=0,r.flags=-1,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new Int32Array(ju),r.distcode=r.distdyn=new Int32Array(qu),r.sane=1,r.back=-1,yt},wo=e=>{if(bt(e))return he;let r=e.state;return r.wsize=0,r.whave=0,r.wnext=0,bo(e)},Ro=(e,r)=>{let t;if(bt(e))return he;let n=e.state;return r<0?(t=0,r=-r):(t=(r>>4)+5,r<48&&(r&=15)),r&&(r<8||r>15)?he:(n.window!==null&&n.wbits!==r&&(n.window=null),n.wrap=t,n.wbits=r,wo(e))},xo=(e,r)=>{if(!e)return he;let t=new Zu;e.state=t,t.strm=e,t.window=null,t.mode=$n;let n=Ro(e,r);return n!==yt&&(e.state=null),n},Vu=e=>xo(e,$u),zi=!0,za,ja,Ju=e=>{if(zi){za=new Int32Array(512),ja=new Int32Array(32);let r=0;for(;r<144;)e.lens[r++]=8;for(;r<256;)e.lens[r++]=9;for(;r<280;)e.lens[r++]=7;for(;r<288;)e.lens[r++]=8;for(Ur(ho,e.lens,0,288,za,0,e.work,{bits:9}),r=0;r<32;)e.lens[r++]=5;Ur(po,e.lens,0,32,ja,0,e.work,{bits:5}),zi=!1}e.lencode=za,e.lenbits=9,e.distcode=ja,e.distbits=5},Eo=(e,r,t,n)=>{let a,s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(r.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>n&&(a=n),s.window.set(r.subarray(t-n,t-n+a),s.wnext),n-=a,n?(s.window.set(r.subarray(t-n,t),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},Xu=(e,r)=>{let t,n,a,s,i,o,d,l,u,w,_,f,m,S,E=0,R,k,p,h,A,C,b,N,O=new Uint8Array(4),T,M,Z=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(bt(e)||!e.output||!e.input&&e.avail_in!==0)return he;t=e.state,t.mode===Oe&&(t.mode=La),i=e.next_out,a=e.output,d=e.avail_out,s=e.next_in,n=e.input,o=e.avail_in,l=t.hold,u=t.bits,w=o,_=d,N=yt;e:for(;;)switch(t.mode){case $n:if(t.wrap===0){t.mode=La;break}for(;u<16;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(t.wrap&2&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,O[0]=l&255,O[1]=l>>>8&255,t.check=$(t.check,O,2,0),l=0,u=0,t.mode=bi;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",t.mode=B;break}if((l&15)!==yi){e.msg="unknown compression method",t.mode=B;break}if(l>>>=4,u-=4,b=(l&15)+8,t.wbits===0&&(t.wbits=b),b>15||b>t.wbits){e.msg="invalid window size",t.mode=B;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=l&512?ki:Oe,l=0,u=0;break;case bi:for(;u<16;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(t.flags=l,(t.flags&255)!==yi){e.msg="unknown compression method",t.mode=B;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=B;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&t.wrap&4&&(O[0]=l&255,O[1]=l>>>8&255,t.check=$(t.check,O,2,0)),l=0,u=0,t.mode=wi;case wi:for(;u<32;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}t.head&&(t.head.time=l),t.flags&512&&t.wrap&4&&(O[0]=l&255,O[1]=l>>>8&255,O[2]=l>>>16&255,O[3]=l>>>24&255,t.check=$(t.check,O,4,0)),l=0,u=0,t.mode=Ri;case Ri:for(;u<16;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&t.wrap&4&&(O[0]=l&255,O[1]=l>>>8&255,t.check=$(t.check,O,2,0)),l=0,u=0,t.mode=xi;case xi:if(t.flags&1024){for(;u<16;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&t.wrap&4&&(O[0]=l&255,O[1]=l>>>8&255,t.check=$(t.check,O,2,0)),l=0,u=0}else t.head&&(t.head.extra=null);t.mode=Ei;case Ei:if(t.flags&1024&&(f=t.length,f>o&&(f=o),f&&(t.head&&(b=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(s,s+f),b)),t.flags&512&&t.wrap&4&&(t.check=$(t.check,n,f,s)),o-=f,s+=f,t.length-=f),t.length))break e;t.length=0,t.mode=vi;case vi:if(t.flags&2048){if(o===0)break e;f=0;do b=n[s+f++],t.head&&b&&t.length<65536&&(t.head.name+=String.fromCharCode(b));while(b&&f<o);if(t.flags&512&&t.wrap&4&&(t.check=$(t.check,n,f,s)),o-=f,s+=f,b)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=Ti;case Ti:if(t.flags&4096){if(o===0)break e;f=0;do b=n[s+f++],t.head&&b&&t.length<65536&&(t.head.comment+=String.fromCharCode(b));while(b&&f<o);if(t.flags&512&&t.wrap&4&&(t.check=$(t.check,n,f,s)),o-=f,s+=f,b)break e}else t.head&&(t.head.comment=null);t.mode=Si;case Si:if(t.flags&512){for(;u<16;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(t.wrap&4&&l!==(t.check&65535)){e.msg="header crc mismatch",t.mode=B;break}l=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=Oe;break;case ki:for(;u<32;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}e.adler=t.check=Bi(l),l=0,u=0,t.mode=jn;case jn:if(t.havedict===0)return e.next_out=i,e.avail_out=d,e.next_in=s,e.avail_in=o,t.hold=l,t.bits=u,Bu;e.adler=t.check=1,t.mode=Oe;case Oe:if(r===Lu||r===Wn)break e;case La:if(t.last){l>>>=u&7,u-=u&7,t.mode=Ba;break}for(;u<3;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}switch(t.last=l&1,l>>>=1,u-=1,l&3){case 0:t.mode=Ai;break;case 1:if(Ju(t),t.mode=Cn,r===Wn){l>>>=2,u-=2;break e}break;case 2:t.mode=Mi;break;case 3:e.msg="invalid block type",t.mode=B}l>>>=2,u-=2;break;case Ai:for(l>>>=u&7,u-=u&7;u<32;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",t.mode=B;break}if(t.length=l&65535,l=0,u=0,t.mode=Fa,r===Wn)break e;case Fa:t.mode=Di;case Di:if(f=t.length,f){if(f>o&&(f=o),f>d&&(f=d),f===0)break e;a.set(n.subarray(s,s+f),i),o-=f,s+=f,d-=f,i+=f,t.length-=f;break}t.mode=Oe;break;case Mi:for(;u<14;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(t.nlen=(l&31)+257,l>>>=5,u-=5,t.ndist=(l&31)+1,l>>>=5,u-=5,t.ncode=(l&15)+4,l>>>=4,u-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=B;break}t.have=0,t.mode=Oi;case Oi:for(;t.have<t.ncode;){for(;u<3;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}t.lens[Z[t.have++]]=l&7,l>>>=3,u-=3}for(;t.have<19;)t.lens[Z[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,T={bits:t.lenbits},N=Ur(Cu,t.lens,0,19,t.lencode,0,t.work,T),t.lenbits=T.bits,N){e.msg="invalid code lengths set",t.mode=B;break}t.have=0,t.mode=Pi;case Pi:for(;t.have<t.nlen+t.ndist;){for(;E=t.lencode[l&(1<<t.lenbits)-1],R=E>>>24,k=E>>>16&255,p=E&65535,!(R<=u);){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(p<16)l>>>=R,u-=R,t.lens[t.have++]=p;else{if(p===16){for(M=R+2;u<M;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(l>>>=R,u-=R,t.have===0){e.msg="invalid bit length repeat",t.mode=B;break}b=t.lens[t.have-1],f=3+(l&3),l>>>=2,u-=2}else if(p===17){for(M=R+3;u<M;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}l>>>=R,u-=R,b=0,f=3+(l&7),l>>>=3,u-=3}else{for(M=R+7;u<M;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}l>>>=R,u-=R,b=0,f=11+(l&127),l>>>=7,u-=7}if(t.have+f>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=B;break}for(;f--;)t.lens[t.have++]=b}}if(t.mode===B)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=B;break}if(t.lenbits=9,T={bits:t.lenbits},N=Ur(ho,t.lens,0,t.nlen,t.lencode,0,t.work,T),t.lenbits=T.bits,N){e.msg="invalid literal/lengths set",t.mode=B;break}if(t.distbits=6,t.distcode=t.distdyn,T={bits:t.distbits},N=Ur(po,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,T),t.distbits=T.bits,N){e.msg="invalid distances set",t.mode=B;break}if(t.mode=Cn,r===Wn)break e;case Cn:t.mode=Ln;case Ln:if(o>=6&&d>=258){e.next_out=i,e.avail_out=d,e.next_in=s,e.avail_in=o,t.hold=l,t.bits=u,Ou(e,_),i=e.next_out,a=e.output,d=e.avail_out,s=e.next_in,n=e.input,o=e.avail_in,l=t.hold,u=t.bits,t.mode===Oe&&(t.back=-1);break}for(t.back=0;E=t.lencode[l&(1<<t.lenbits)-1],R=E>>>24,k=E>>>16&255,p=E&65535,!(R<=u);){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(k&&!(k&240)){for(h=R,A=k,C=p;E=t.lencode[C+((l&(1<<h+A)-1)>>h)],R=E>>>24,k=E>>>16&255,p=E&65535,!(h+R<=u);){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}l>>>=h,u-=h,t.back+=h}if(l>>>=R,u-=R,t.back+=R,t.length=p,k===0){t.mode=Ci;break}if(k&32){t.back=-1,t.mode=Oe;break}if(k&64){e.msg="invalid literal/length code",t.mode=B;break}t.extra=k&15,t.mode=Ii;case Ii:if(t.extra){for(M=t.extra;u<M;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Ui;case Ui:for(;E=t.distcode[l&(1<<t.distbits)-1],R=E>>>24,k=E>>>16&255,p=E&65535,!(R<=u);){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(!(k&240)){for(h=R,A=k,C=p;E=t.distcode[C+((l&(1<<h+A)-1)>>h)],R=E>>>24,k=E>>>16&255,p=E&65535,!(h+R<=u);){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}l>>>=h,u-=h,t.back+=h}if(l>>>=R,u-=R,t.back+=R,k&64){e.msg="invalid distance code",t.mode=B;break}t.offset=p,t.extra=k&15,t.mode=Ni;case Ni:if(t.extra){for(M=t.extra;u<M;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=B;break}t.mode=Wi;case Wi:if(d===0)break e;if(f=_-d,t.offset>f){if(f=t.offset-f,f>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=B;break}f>t.wnext?(f-=t.wnext,m=t.wsize-f):m=t.wnext-f,f>t.length&&(f=t.length),S=t.window}else S=a,m=i-t.offset,f=t.length;f>d&&(f=d),d-=f,t.length-=f;do a[i++]=S[m++];while(--f);t.length===0&&(t.mode=Ln);break;case Ci:if(d===0)break e;a[i++]=t.length,d--,t.mode=Ln;break;case Ba:if(t.wrap){for(;u<32;){if(o===0)break e;o--,l|=n[s++]<<u,u+=8}if(_-=d,e.total_out+=_,t.total+=_,t.wrap&4&&_&&(e.adler=t.check=t.flags?$(t.check,a,_,i-_):Fr(t.check,a,_,i-_)),_=d,t.wrap&4&&(t.flags?l:Bi(l))!==t.check){e.msg="incorrect data check",t.mode=B;break}l=0,u=0}t.mode=Li;case Li:if(t.wrap&&t.flags){for(;u<32;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(t.wrap&4&&l!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=B;break}l=0,u=0}t.mode=Fi;case Fi:N=Fu;break e;case B:N=_o;break e;case mo:return go;case yo:default:return he}return e.next_out=i,e.avail_out=d,e.next_in=s,e.avail_in=o,t.hold=l,t.bits=u,(t.wsize||_!==e.avail_out&&t.mode<B&&(t.mode<Ba||r!==mi))&&Eo(e,e.output,e.next_out,_-e.avail_out),w-=e.avail_in,_-=e.avail_out,e.total_in+=w,e.total_out+=_,t.total+=_,t.wrap&4&&_&&(e.adler=t.check=t.flags?$(t.check,a,_,e.next_out-_):Fr(t.check,a,_,e.next_out-_)),e.data_type=t.bits+(t.last?64:0)+(t.mode===Oe?128:0)+(t.mode===Cn||t.mode===Fa?256:0),(w===0&&_===0||r===mi)&&N===yt&&(N=zu),N},Gu=e=>{if(bt(e))return he;let r=e.state;return r.window&&(r.window=null),e.state=null,yt},Ku=(e,r)=>{if(bt(e))return he;let t=e.state;return t.wrap&2?(t.head=r,r.done=!1,yt):he},Yu=(e,r)=>{let t=r.length,n,a,s;return bt(e)||(n=e.state,n.wrap!==0&&n.mode!==jn)?he:n.mode===jn&&(a=1,a=Fr(a,r,t,0),a!==n.check)?_o:(s=Eo(e,r,t,t),s?(n.mode=mo,go):(n.havedict=1,yt))},Qu=wo,ed=Ro,td=bo,rd=Vu,nd=xo,ad=Xu,sd=Gu,id=Ku,od=Yu,ld="pako inflate (from Nodeca project)",Ie={inflateReset:Qu,inflateReset2:ed,inflateResetKeep:td,inflateInit:rd,inflateInit2:nd,inflate:ad,inflateEnd:sd,inflateGetHeader:id,inflateSetDictionary:od,inflateInfo:ld};function cd(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var ud=cd,vo=Object.prototype.toString,{Z_NO_FLUSH:dd,Z_FINISH:fd,Z_OK:jr,Z_STREAM_END:qa,Z_NEED_DICT:Ha,Z_STREAM_ERROR:hd,Z_DATA_ERROR:ji,Z_MEM_ERROR:pd}=Kt;function Zr(e){this.options=Hn.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});let r=this.options;r.raw&&r.windowBits>=0&&r.windowBits<16&&(r.windowBits=-r.windowBits,r.windowBits===0&&(r.windowBits=-15)),r.windowBits>=0&&r.windowBits<16&&!(e&&e.windowBits)&&(r.windowBits+=32),r.windowBits>15&&r.windowBits<48&&(r.windowBits&15||(r.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new uo,this.strm.avail_out=0;let t=Ie.inflateInit2(this.strm,r.windowBits);if(t!==jr)throw new Error(gt[t]);if(this.header=new ud,Ie.inflateGetHeader(this.strm,this.header),r.dictionary&&(typeof r.dictionary=="string"?r.dictionary=zr.string2buf(r.dictionary):vo.call(r.dictionary)==="[object ArrayBuffer]"&&(r.dictionary=new Uint8Array(r.dictionary)),r.raw&&(t=Ie.inflateSetDictionary(this.strm,r.dictionary),t!==jr)))throw new Error(gt[t])}Zr.prototype.push=function(e,r){let t=this.strm,n=this.options.chunkSize,a=this.options.dictionary,s,i,o;if(this.ended)return!1;for(r===~~r?i=r:i=r===!0?fd:dd,vo.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),s=Ie.inflate(t,i),s===Ha&&a&&(s=Ie.inflateSetDictionary(t,a),s===jr?s=Ie.inflate(t,i):s===ji&&(s=Ha));t.avail_in>0&&s===qa&&t.state.wrap>0&&e[t.next_in]!==0;)Ie.inflateReset(t),s=Ie.inflate(t,i);switch(s){case hd:case ji:case Ha:case pd:return this.onEnd(s),this.ended=!0,!1}if(o=t.avail_out,t.next_out&&(t.avail_out===0||s===qa))if(this.options.to==="string"){let d=zr.utf8border(t.output,t.next_out),l=t.next_out-d,u=zr.buf2string(t.output,d);t.next_out=l,t.avail_out=n-l,l&&t.output.set(t.output.subarray(d,d+l),0),this.onData(u)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===jr&&o===0)){if(s===qa)return s=Ie.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};Zr.prototype.onData=function(e){this.chunks.push(e)};Zr.prototype.onEnd=function(e){e===jr&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=Hn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function is(e,r){let t=new Zr(r);if(t.push(e),t.err)throw t.msg||gt[t.err];return t.result}function _d(e,r){return r=r||{},r.raw=!0,is(e,r)}var gd=Zr,md=is,yd=_d,bd=is,wd=Kt,Rd={Inflate:gd,inflate:md,inflateRaw:yd,ungzip:bd,constants:wd},{Deflate:ip,deflate:op,deflateRaw:lp,gzip:cp}=Du,{Inflate:up,inflate:dp,inflateRaw:fp,ungzip:xd}=Rd;var Zn=xd;function To(e,r,t){if(e!==c.FS.filesystems.WORKERFS)return c.FS._mount(e,r,t);if("packages"in r&&r.packages)r.packages.forEach(n=>{Vr(n.blob,n.metadata,t)});else throw new Error("Can't mount data. You must use the `packages` key when mounting with `WORKERFS` in webR.")}function So(e,r){if(/\.tgz$|\.tar\.gz$|\.tar$/.test(e)){let t=c.downloadFileContent(e);if(t.status<200||t.status>=300)throw new Error("Can't download Emscripten filesystem image.");let{data:n,metadata:a}=Ao(t.response);Vr(n,a,r)}else{let t=e.replace(/\.data\.gz$|\.data$|\.js.metadata$/,""),n=c.downloadFileContent(`${t}.js.metadata`);if(n.status<200||n.status>=300)throw new Error("Can't download Emscripten filesystem image metadata.");let a=JSON.parse(new TextDecoder().decode(n.response)),s=a.gzip?".data.gz":".data",i=c.downloadFileContent(`${t}${s}`);if(i.status<200||i.status>=300)throw new Error("Can't download Emscripten filesystem image data.");let o=i.response;a.gzip&&(o=Zn(o).buffer),Vr(o,a,r)}}function ko(e,r){let t=require("fs");if(/\.tgz$|\.tar\.gz$|\.tar$/.test(e)){let n=t.readFileSync(e),{data:a,metadata:s}=Ao(n);Vr(a,s,r)}else{let n=e.replace(/\.data\.gz$|\.data$|\.js.metadata$/,""),a=JSON.parse(t.readFileSync(`${n}.js.metadata`,"utf8")),s=a.gzip?".data.gz":".data",i=t.readFileSync(`${n}${s}`);a.gzip&&(i=Zn(i).buffer),Vr(i,a,r)}}function Vr(e,r,t){if(z){let n=Buffer.from(e),a=c.FS.filesystems.WORKERFS;a.reader||(a.reader={readAsArrayBuffer:s=>new Uint8Array(s)}),r.files.forEach(s=>{let i=n.subarray(s.start,s.end);i.size=i.byteLength,i.slice=(w,_)=>{let f=i.subarray(w,_);return f.size=f.byteLength,f};let o=(t+s.filename).split("/"),d=o.pop();if(!d)throw new Error(`Invalid mount path "${t}${s.filename}".`);let l=o.join("/");c.FS.mkdirTree(l);let u=c.FS.lookupPath(l,{}).node;a.createNode(u,d,a.FILE_MODE,0,i)})}else c.FS._mount(c.FS.filesystems.WORKERFS,{packages:[{blob:new Blob([e]),metadata:r}]},t)}function Ao(e){let r=Zn(e).buffer,t=Ed(r)||vd(r);if(!t)throw new Error("Can't mount archive, no VFS metadata found.");let n=new DataView(r,512*t.block,t.len),a=JSON.parse(new TextDecoder().decode(n));return{data:r,metadata:a}}function Ed(e){let r=new DataView(e),t=r.getInt32(r.byteLength-16),n=r.getInt32(r.byteLength-8),a=r.getInt32(r.byteLength-4);return t!==2003133010||n===0||a===0?null:{block:n,len:a}}function vd(e){let r=new TextDecoder,t=0;for(;t<e.byteLength;){let n=e.slice(t,t+512);if(t+=512,new Uint8Array(n).every(o=>o===0))return null;let a=r.decode(n.slice(156,157));if(/5|g|[A-Z]/.test(a))continue;let s=r.decode(n.slice(0,100)).replace(/\0+$/,""),i=parseInt(r.decode(n.slice(124,136)),8);if(s==".vfs-index.json")return{block:t/512,len:i};t+=512*Math.ceil(i/512)}return null}var Po=!1,Io=!1,y;Object.assign(globalThis,{RCall:ce,RCharacter:le,RComplex:et,RDataFrame:ge,RDouble:We,REnvironment:oe,RInteger:Et,RList:ue,RLogical:re,RObject:v,RPairlist:ke,RRaw:tt,RString:rt,RSymbol:H,destroy:Yn,getRWorkerClass:or,initPersistentObjects:ea,isRObject:nt,keep:st,objs:F,purge:Qn,shelters:Ce});var Uo=function(e){if(!(!e||!e.type)){if(e.type==="init"){if(Po)throw new Error("Can't initialise worker multiple times.");let r=e;y=ai(r),r.data.config.channelType=r.data.channelType,Md(r.data.config),Po=!0;return}y==null||y.onMessageFromMainThread(e)}};z?(require("worker_threads").parentPort.on("message",Uo),globalThis.XMLHttpRequest=Oo().XMLHttpRequest):globalThis.onmessage=e=>Uo(e.data);var ee;function Sd(e){switch(e.type){case"request":{let r=e,t=r.data.msg,n=(a,s)=>y==null?void 0:y.write(lt(r.data.uuid,a,s));try{switch(t.type){case"lookupPath":{let a=t,s=c.FS.lookupPath(a.data.path,{}).node;n({obj:Vn(s),payloadType:"raw"});break}case"mkdir":{let a=t;n({obj:Vn(c.FS.mkdir(a.data.path)),payloadType:"raw"});break}case"mount":{let a=t,s=a.data.type;if(s==="IDBFS"&&ee.channelType==_e.SharedArrayBuffer)throw new Error("The `IDBFS` filesystem type is not supported under the `SharedArrayBuffer` communication channel. The `PostMessage` communication channel must be used.");let i=c.FS.filesystems[s];c.FS.mount(i,a.data.options,a.data.mountpoint),n({obj:null,payloadType:"raw"});break}case"syncfs":{let a=t;c.FS.syncfs(a.data.populate,s=>{if(s)throw new Error(`Emscripten \`syncfs\` error: "${s}".`);n({obj:null,payloadType:"raw"})});break}case"readFile":{let s=t.data,i={obj:c.FS.readFile(s.path,{encoding:"binary",flags:s.flags}),payloadType:"raw"};n(i,[i.obj.buffer]);break}case"rmdir":{let a=t;n({obj:c.FS.rmdir(a.data.path),payloadType:"raw"});break}case"writeFile":{let s=t.data,i=Uint8Array.from(Object.values(s.data));n({obj:c.FS.writeFile(s.path,i,{flags:s.flags}),payloadType:"raw"});break}case"unlink":{let a=t;n({obj:c.FS.unlink(a.data.path),payloadType:"raw"});break}case"unmount":{let a=t;n({obj:c.FS.unmount(a.data.path),payloadType:"raw"});break}case"newShelter":{let a=Rt();Ce.set(a,[]),n({payloadType:"raw",obj:a});break}case"shelterSize":{let a=t,s=Ce.get(a.data).length;n({payloadType:"raw",obj:s});break}case"shelterPurge":{Qn(t.data),n({payloadType:"raw",obj:null});break}case"shelterDestroy":{let a=t;Yn(a.data.id,a.data.obj.obj.ptr),n({payloadType:"raw",obj:null});break}case"captureR":{let s=t.data,i=s.shelter,o={n:0};try{let d=ls(s.code,s.options);I(d.result,o),I(d.output,o);let l=d.result;st(i,l);let u=d.output.length,w=[];for(let f=1;f<u+1;++f){let m=d.output.get(f),S=m.pluck(1,1).toString(),E=m.get(2);if(S==="stdout"||S==="stderr"){let R=E.toString();w.push({type:S,data:R})}else{st(i,E);let R={obj:{ptr:E.ptr,type:E.type(),methods:v.getMethods(E)},payloadType:"ptr"};w.push({type:S,data:R})}}let _={payloadType:"ptr",obj:{ptr:l.ptr,type:l.type(),methods:v.getMethods(l)}};n({payloadType:"raw",obj:{result:_,output:w,images:d.images}})}finally{L(o.n)}break}case"evalR":{let a=t,s=Jr(a.data.code,a.data.options);st(a.data.shelter,s),n({obj:{type:s.type(),ptr:s.ptr,methods:v.getMethods(s)},payloadType:"ptr"});break}case"evalRRaw":{let a=t,s=Jr(a.data.code,a.data.options);Ke(s);let i=()=>{throw new Error(`Can't convert object of type ${s.type()} to ${a.data.outputType}.`)};try{let o;switch(a.data.outputType){case"void":break;case"boolean":switch(s.type()){case"logical":o=s.toBoolean();break;default:i()}break;case"boolean[]":switch(s.type()){case"logical":o=s.toArray(),o.some(d=>d===null)&&i();break;default:i()}break;case"number":switch(s.type()){case"logical":o=s.toBoolean(),o=Number(o);break;case"integer":o=s.toNumber();break;case"double":o=s.toNumber();break;default:i()}break;case"number[]":switch(s.type()){case"logical":o=s.toArray(),o=o.map(d=>d===null?i():Number(d));break;case"integer":o=s.toArray(),o.some(d=>d===null)&&i();break;case"double":o=s.toArray(),o.some(d=>d===null)&&i();break;default:i()}break;case"string":switch(s.type()){case"character":o=s.toString();break;default:i()}break;case"string[]":switch(s.type()){case"character":o=s.toArray(),o.some(d=>d===null)&&i();break;default:i()}break;default:throw new Error("Unexpected output type in `evalRRaw().")}n({obj:o,payloadType:"raw"});break}finally{L(1)}}case"newRObject":{let a=t,s=Ad(a.data.args,a.data.objType);st(a.data.shelter,s.obj.ptr),n(s);break}case"callRObjectMethod":{let s=t.data,i=s.payload?v.wrap(s.payload.obj.ptr):v,o=Dd(i,s.prop,s.args);pr(o)&&st(s.shelter,o.obj.ptr),n(o);break}case"invokeWasmFunction":{let a=t,s=c.getWasmTableEntry(a.data.ptr)(...a.data.args);n({payloadType:"raw",obj:s});break}case"installPackages":{let a=t,s=a.data.name,i=a.data.options.repos?a.data.options.repos:ee.repoUrl;typeof s=="string"&&(s=[s]),typeof i=="string"&&(i=[i]),Jr(`webr::install(
              c(${s.map(o=>'"'+o+'"').join(",")}),
              repos = c(${i.map(o=>'"'+o+'"').join(",")}),
              quiet = ${a.data.options.quiet?"TRUE":"FALSE"},
              mount = ${a.data.options.mount?"TRUE":"FALSE"}
            )`),n({obj:!0,payloadType:"raw"});break}default:throw new Error("Unknown event `"+t.type+"`")}}catch(a){let s=a;n({payloadType:"err",obj:{name:s.name,message:s.message,stack:s.stack}}),s instanceof wt&&(c._R_ContinueUnwind(s.cont),nn())}break}default:throw new Error("Unknown event `"+e.type+"`")}}function Vn(e){let r={id:e.id,name:e.name,mode:e.mode,isFolder:e.isFolder,mounted:null,contents:{}};return e.isFolder&&e.contents&&(r.contents=Object.fromEntries(Object.entries(e.contents).map(([t,n])=>[t,Vn(n)]))),e.mounted!==null&&(r.mounted={mountpoint:e.mounted.mountpoint,root:Vn(e.mounted.root)}),r}function kd(e,r=[]){let t=new XMLHttpRequest;t.open("GET",e,!1),t.responseType="arraybuffer";try{r.forEach(n=>{let a=n.split(": ");t.setRequestHeader(a[0],a[1])})}catch{let n="An error occurred setting headers in XMLHttpRequest";return console.error(n),{status:400,response:n}}try{t.send(null);let n=z?JSON.parse(String(t.status)).data.statusCode:t.status;if(n>=200&&n<300)return{status:n,response:t.response};{let a=new TextDecoder().decode(t.response);return console.error(`Error fetching ${e} - ${a}`),{status:n,response:a}}}catch{return{status:400,response:"An error occurred in XMLHttpRequest"}}}function Ad(e,r){let t=or(r),n=it(e,pr,s=>v.wrap(s.obj.ptr)),a=new t(...n);return{obj:{type:a.type(),ptr:a.ptr,methods:v.getMethods(a)},payloadType:"ptr"}}function Dd(e,r,t){if(!(r in e))throw new ReferenceError(`${r} is not defined`);let n=e[r];if(typeof n!="function")throw Error("Requested property cannot be invoked");let a=n.apply(e,t.map(i=>i.payloadType==="ptr"?v.wrap(i.obj.ptr):it(i.obj,pr,o=>v.wrap(o.obj.ptr))));return{obj:it(a,nt,i=>({obj:{type:i.type(),ptr:i.ptr,methods:v.getMethods(i)},payloadType:"ptr"})),payloadType:"raw"}}function ls(e,r={}){var s;let t=Object.assign({env:F.globalEnv,captureStreams:!0,captureConditions:!0,captureGraphics:typeof OffscreenCanvas<"u",withAutoprint:!1,throwJsException:!0,withHandlers:!0},it(r,pr,i=>v.wrap(i.obj.ptr))),n={n:0},a=new oe({});I(a,n),c.setValue(c._R_Interactive,0,"i8");try{let i=new oe(t.env);if(I(i,n),i.type()!=="environment")throw new Error("Attempted to evaluate R code with invalid environment object");if(t.captureGraphics){if(typeof OffscreenCanvas>"u")throw new Error("This environment does not have support for OffscreenCanvas. Consider disabling plot capture using `captureGraphics: false`.");a.bind("canvas_options",new ue(Object.assign({capture:!0},t.captureGraphics))),Se(`{
        old_dev <- dev.cur()
        do.call(webr::canvas, canvas_options)
        new_dev <- dev.cur()
        old_cache <- webr::canvas_cache()
        plots <- numeric()
      }`,a)}let o=F.true.ptr,d=F.false.ptr,l=Se("webr::eval_r",F.baseEnv),u=Se("quote",F.baseEnv);I(l,n),I(u,n);let w=new v(e);I(w,n);let _=c._Rf_lang6(l.ptr,c._Rf_lang2(u.ptr,w.ptr),t.captureConditions?o:d,t.captureStreams?o:d,t.withAutoprint?o:d,t.withHandlers?o:d);I(_,n);let f=ue.wrap(Ye(_,i));if(I(f,n),t.captureConditions&&t.throwJsException){let E=f.get("output").toArray().find(R=>R.get("type").toString()==="error");if(E){let R=E.pluck("data","call"),k=R&&R.type()==="call"?`\`${R.deparse()}\``:"unknown source",p=((s=E.pluck("data","message"))==null?void 0:s.toString())||"An error occurred evaluating R code.";throw new Error(`Error in ${k}: ${p}`)}}let m=[];if(t.captureGraphics){let S=Se(`{
        new_cache <- webr::canvas_cache()
        plots <- setdiff(new_cache, old_cache)
      }`,a);I(S,n),m=S.toArray().map(E=>c.webr.canvas[E].offscreen.transferToImageBitmap())}return{result:f.get("result"),output:f.get("output"),images:m}}finally{c.setValue(c._R_Interactive,ee.interactive?1:0,"i8");let i=a.get("new_dev");t.captureGraphics&&i.type()!=="null"&&Se(`{
        dev.off(new_dev)
        dev.set(old_dev)
        webr::canvas_destroy(plots)
      }`,a),L(n.n)}}function Jr(e,r={}){var a,s;r=Object.assign({captureGraphics:!1},r);let t={n:0},n=ls(e,r);try{I(n.output,t),I(n.result,t);for(let i=1;i<=n.output.length;i++){let o=n.output.get(i),d=o.get("type").toString();switch(d){case"stdout":y==null||y.writeSystem({type:"console.log",data:o.get("data").toString()});break;case"stderr":y==null||y.writeSystem({type:"console.warn",data:o.get("data").toString()});break;case"message":y==null||y.writeSystem({type:"console.warn",data:((a=o.pluck("data","message"))==null?void 0:a.toString())||""});break;case"warning":y==null||y.writeSystem({type:"console.warn",data:`Warning message: 
${((s=o.pluck("data","message"))==null?void 0:s.toString())||""}`});break;default:y==null||y.writeSystem({type:"console.warn",data:`Output of type ${d}:`}),y==null||y.writeSystem({type:"console.warn",data:o.get("data").toJs()});break}}return n.result}finally{L(t.n)}}function Md(e){ee=e;let r={...e.REnv};if(!r.TZ){let t=new Intl.DateTimeFormat;r.TZ=t.resolvedOptions().timeZone}c.preRun=[],c.arguments=ee.RArgs,c.noExitRuntime=!0,c.noImageDecoding=!0,c.noAudioDecoding=!0,c.noInitialRun=!0,c.noWasmDecoding=!0,c.preRun.push(()=>{z&&(globalThis.FS=c.FS,globalThis.chan=y),ee.createLazyFilesystem&&c.createLazyFilesystem(),c.FS.mkdirTree(ee.homedir),c.ENV.HOME=ee.homedir,c.FS.chdir(ee.homedir),c.ENV=Object.assign(c.ENV,r),c.FS._mount=c.FS.mount,c.FS.mount=To}),y==null||y.setDispatchHandler(Sd),c.onRuntimeInitialized=()=>{y==null||y.run(ee.RArgs)},c.webr={UnwindProtectException:wt,evalR:Jr,captureR:ls,channel:y,canvas:{},resolveInit:()=>{ea(),y==null||y.setInterrupt(c._Rf_onintr),c.setValue(c._R_Interactive,ee.interactive?1:0,"i8"),Jr(`options(webr_pkg_repos="${ee.repoUrl}")`),y==null||y.resolve(),Io=!0},setPrompt:t=>{y==null||y.write({type:"prompt",data:t})},readConsole:()=>{if(!y)throw new Error("Can't read console input without a communication channel");return Io||c.webr.resolveInit(),y.inputOrDispatch()},handleEvents:()=>{y==null||y.handleInterrupt()},dataViewer:(t,n)=>{let a=ue.wrap(t).toObject({depth:0});y==null||y.write({type:"view",data:{data:a,title:n}})},evalJs:t=>{try{let n=(0,eval)(c.UTF8ToString(t));return new v(n).ptr}catch(n){if(n instanceof wt)c._R_ContinueUnwind(n.cont),nn();else if(n===1/0)throw n;let a=c.allocateUTF8OnStack(`An error occurred during JavaScript evaluation:
  ${n.message}`);c._Rf_error(a)}return nn(),0},setTimeoutWasm:(t,n,...a)=>{y==null||y.writeSystem({type:"setTimeoutWasm",data:{ptr:t,delay:n,args:a}})}},c.locateFile=t=>ee.baseUrl+t,c.downloadFileContent=kd,c.mountImageUrl=So,c.mountImagePath=ko,c.print=t=>{y==null||y.write({type:"stdout",data:t})},c.printErr=t=>{y==null||y.write({type:"stderr",data:t})},globalThis.Module=c,setTimeout(()=>{let t=`${ee.baseUrl}R.js`;ar(t)})}
/*! Bundled license information:

xmlhttprequest-ssl/lib/XMLHttpRequest.js:
  (**
   * Wrapper for built-in http.js to emulate the browser XMLHttpRequest object.
   *
   * This can be used with JS designed for browsers to improve reuse of code and
   * allow the use of existing libraries.
   *
   * Usage: include("XMLHttpRequest.js") and use XMLHttpRequest per W3C specs.
   *
   * @author Dan DeFelippi <dan@driverdan.com>
   * @contributor David Ellis <d.f.ellis@ieee.org>
   * @license MIT
   *)

pako/dist/pako.esm.mjs:
  (*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) *)
*/
//# sourceMappingURL=webr-worker.js.map
